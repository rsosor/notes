			index(æš«å­˜/stage)		a list of files		a list of files of the remote
		   add		ã€€ã€€ã€€commit			push
working directory	   â†’	staging area	â†’	local repository	â†’	remote repository
	|	â†–			ã€€ã€€	ï¼	â†–		ï¼	 |
	|	ã€€Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯		ã€€Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯		 |
	|		ã€€ã€€ã€€checkout			ã€€ã€€  clone/fetch		 |
	|________________________________________________________________________________|
					pull
å·¥ä½œç›®éŒ„			.git æ–‡ä»¶å¤¾(æš«å­˜å€)		.git æ–‡ä»¶å¤¾(repo/è³‡æ–™åº«/ç·¨è¼¯ç’°å¢ƒ/æœ¬åœ°ç‰ˆæœ¬åº«)
Working tree means the directory that contains the .git folder, including all sub directories and files.



Header: <type>(<scope>): <subject>
 - type: ä»£è¡¨ commit çš„é¡åˆ¥ï¼šfeat, fix, docs, style, refactor, test, choreï¼Œå¿…è¦æ¬„ä½ã€‚
 - scope ä»£è¡¨ commit å½±éŸ¿çš„ç¯„åœï¼Œä¾‹å¦‚è³‡æ–™åº«ã€æ§åˆ¶å±¤ã€æ¨¡æ¿å±¤ç­‰ç­‰ï¼Œè¦–å°ˆæ¡ˆä¸åŒè€Œä¸åŒï¼Œç‚ºå¯é¸æ¬„ä½ã€‚
 - subject ä»£è¡¨æ­¤ commit çš„ç°¡çŸ­æè¿°ï¼Œä¸è¦è¶…é 50 å€‹å­—å…ƒï¼Œçµå°¾ä¸è¦åŠ å¥è™Ÿï¼Œç‚ºå¿…è¦æ¬„ä½ã€‚

Body: 72-character wrapped. This should answer:
 * Body éƒ¨ä»½æ˜¯å°æœ¬æ¬¡ Commit çš„è©³ç´°æè¿°ï¼Œå¯ä»¥åˆ†æˆå¤šè¡Œï¼Œæ¯ä¸€è¡Œä¸è¦è¶…é 72 å€‹å­—å…ƒã€‚
 * èªªæ˜ç¨‹å¼ç¢¼è®Šå‹•çš„é …ç›®èˆ‡åŸå› ï¼Œé‚„æœ‰èˆ‡å…ˆå‰è¡Œç‚ºçš„å°æ¯”ã€‚

Footer: 
 - å¡«å¯«ä»»å‹™ç·¨è™Ÿï¼ˆå¦‚æœæœ‰çš„è©±ï¼‰.
 - BREAKING CHANGEï¼ˆå¯å¿½ç•¥ï¼‰ï¼Œè¨˜éŒ„ä¸å…¼å®¹çš„è®Šå‹•ï¼Œ
   ä»¥ BREAKING CHANGE: é–‹é ­ï¼Œå¾Œé¢æ˜¯å°è®Šå‹•çš„æè¿°ã€ä»¥åŠè®Šå‹•åŸå› å’Œé·ç§»æ–¹æ³•ã€‚
#+ISSUE ID   è‹¥ Git ç·šä¸Šå¹³å°æœªèˆ‡å·¥å–®ç³»çµ±æ•´åˆå¯å…ˆä»¥ ç•¶å¤©æ—¥æœŸ+æµæ°´è™Ÿ

type: subject æ˜¯ç°¡è¿°ä¸è¦è¶…é 50 å€‹å­—å…ƒ

type åªå…è¨±ä½¿ç”¨ä»¥ä¸‹é¡åˆ¥ï¼š
ï¼feat	æ–°å¢/ä¿®æ”¹åŠŸèƒ½ (feature)ã€‚
ï¼fix	ä¿®è£œ bug (bug fix)ã€‚
ï¼docs	æ–‡ä»¶ (documentation)ã€‚
ï¼style	æ ¼å¼ (ä¸å½±éŸ¿ç¨‹å¼ç¢¼é‹è¡Œçš„è®Šå‹• white-space, formatting, missing semi colons, etc)ã€‚
ï¼refactor	é‡æ§‹ (æ—¢ä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®è£œ bug çš„ç¨‹å¼ç¢¼è®Šå‹•)ã€‚
ï¼perf	æ”¹å–„æ•ˆèƒ½ (A code change that improves performance)ã€‚
ï¼test	å¢åŠ æ¸¬è©¦ (when adding missing tests)ã€‚
ï¼chore	å»ºæ§‹ç¨‹åºæˆ–è¼”åŠ©å·¥å…·çš„è®Šå‹• (maintain)ã€‚
ï¼revert	æ’¤éŠ·å›è¦†å…ˆå‰çš„ commit ä¾‹å¦‚ï¼šrevert: type(scope): subject (å›è¦†ç‰ˆæœ¬ï¼šxxxx)ã€‚

ï¼init	åˆå§‹åŒ–
ï¼add
ï¼fix	æ¥­å‹™å° ä¿®æ”¹ç¨‹å¼
ï¼adjust	æ¥­å‹™æ”¹ ç¨‹å¼å°è€Œæ”¹
ï¼review	é€šå¸¸ä»»å‹™åˆ†æ”¯ä¸Šã€review æ•´ç†å°±åŒ…æ‹¬ç§»é™¤è€Œä¸æ˜¯ç”¨ del
ï¼del	é€šå¸¸ä»»å‹™åˆ†æ”¯ä¸Šã€review å¾Œã€åˆªé™¤æ›´æ–°æ™‚ä¸åœ¨æ–°å¢å…§å®¹å¯©æ ¸å…§(ä¸å¾—ä¸åˆªé™¤æª”æ¡ˆçš„æƒ…æ³)
ï¼sync	é€²åº¦åŒæ­¥åˆ°é ç«¯æ•¸æ“šåº«ï¼Œæ›äººæ¥æ‰‹æˆ–å…¶ä»–äººæ”¯æ´ï¼Œå¿…é ˆå…ˆå°‡æ‰‹ä¸­ä»£ç¢¼åŒæ­¥åˆ°é ç«¯ã€‚å…¬å¸èˆ‡å®¢æˆ¶ç«¯æ‰‹å‹•åŒæ­¥
ï¼tmp(temporary:è‡¨æ™‚)	æš«å­˜æœ¬åœ°æ•¸æ“šåº«
ï¼merge	æ‰‹å‹•åˆä½µæ™‚(å…¬å¸ç«¯èˆ‡å®¢æˆ¶ç«¯æœ‰å„è‡ªç‰ˆæ§å°ˆæ¡ˆè¦åŒæ­¥

.gitignore å„ªå…ˆç´šåˆ¥ï¼š
1. å¾å‘½ä»¤è¡Œä¸­è®€å–å¯ç”¨çš„å¿½ç•¥è¦å‰‡
2. ç•¶å‰ç›®éŒ„å®šç¾©
3. çˆ¶ç´šç›®éŒ„å®šç¾©
4. $GIT_DIR/info/exclude æ–‡ä»¶ä¸­å®šç¾©çš„è¦å‰‡
5. core.excludesfile ä¸­å®šç¾©çš„å…¨å±€è¦å‰‡

åœ¨ .gitignore æ–‡ä»¶ä¸­ï¼Œæ¯ä¸€è¡Œçš„å¿½ç•¥è§„åˆ™çš„è¯­æ³•å¦‚ä¸‹ï¼š
1ã€ç©ºæ ¼ä¸åŒ¹é…ä»»æ„æ–‡ä»¶ï¼Œå¯ä½œä¸ºåˆ†éš”ç¬¦ï¼Œå¯ç”¨åæ–œæ è½¬ä¹‰
2ã€ä»¥â€œï¼ƒâ€å¼€å¤´çš„è¡Œéƒ½ä¼šè¢« Git å¿½ç•¥ã€‚å³#å¼€å¤´çš„æ–‡ä»¶æ ‡è¯†æ³¨é‡Šï¼Œå¯ä»¥ä½¿ç”¨åæ–œæ è¿›è¡Œè½¬ä¹‰ã€‚
3ã€å¯ä»¥ä½¿ç”¨æ ‡å‡†çš„globæ¨¡å¼åŒ¹é…ã€‚æ‰€è°“çš„globæ¨¡å¼æ˜¯æŒ‡shellæ‰€ä½¿ç”¨çš„ç®€åŒ–äº†çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚
4ã€ä»¥æ–œæ "/"å¼€å¤´è¡¨ç¤ºç›®å½•ï¼›"/"ç»“æŸçš„æ¨¡å¼åªåŒ¹é…æ–‡ä»¶å¤¹ä»¥åŠåœ¨è¯¥æ–‡ä»¶å¤¹è·¯å¾„ä¸‹çš„å†…å®¹ï¼Œä½†æ˜¯ä¸åŒ¹é…è¯¥æ–‡ä»¶ï¼›"/"å¼€å§‹çš„æ¨¡å¼åŒ¹é…é¡¹ç›®è·Ÿç›®å½•ï¼›å¦‚æœä¸€ä¸ªæ¨¡å¼ä¸åŒ…å«æ–œæ ï¼Œåˆ™å®ƒåŒ¹é…ç›¸å¯¹äºå½“å‰ .gitignore æ–‡ä»¶è·¯å¾„çš„å†…å®¹ï¼Œå¦‚æœè¯¥æ¨¡å¼ä¸åœ¨ .gitignore æ–‡ä»¶ä¸­ï¼Œåˆ™ç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•ã€‚
5ã€ä»¥æ˜Ÿå·"*"é€šé…å¤šä¸ªå­—ç¬¦ï¼Œå³åŒ¹é…å¤šä¸ªä»»æ„å­—ç¬¦ï¼›ä½¿ç”¨ä¸¤ä¸ªæ˜Ÿå·"**" è¡¨ç¤ºåŒ¹é…ä»»æ„ä¸­é—´ç›®å½•ï¼Œæ¯”å¦‚a/**/zå¯ä»¥åŒ¹é… a/z, a/b/z æˆ– a/b/c/zç­‰ã€‚
6ã€ä»¥é—®å·"?"é€šé…å•ä¸ªå­—ç¬¦ï¼Œå³åŒ¹é…ä¸€ä¸ªä»»æ„å­—ç¬¦ï¼›
7ã€ä»¥æ–¹æ‹¬å·"[]"åŒ…å«å•ä¸ªå­—ç¬¦çš„åŒ¹é…åˆ—è¡¨ï¼Œå³åŒ¹é…ä»»ä½•ä¸€ä¸ªåˆ—åœ¨æ–¹æ‹¬å·ä¸­çš„å­—ç¬¦ã€‚æ¯”å¦‚[abc]è¡¨ç¤ºè¦ä¹ˆåŒ¹é…ä¸€ä¸ªaï¼Œè¦ä¹ˆåŒ¹é…ä¸€ä¸ªbï¼Œè¦ä¹ˆåŒ¹é…ä¸€ä¸ªcï¼›å¦‚æœåœ¨æ–¹æ‹¬å·ä¸­ä½¿ç”¨çŸ­åˆ’çº¿åˆ†éš”ä¸¤ä¸ªå­—ç¬¦ï¼Œè¡¨ç¤ºæ‰€æœ‰åœ¨è¿™ä¸¤ä¸ªå­—ç¬¦èŒƒå›´å†…çš„éƒ½å¯ä»¥åŒ¹é…ã€‚æ¯”å¦‚[0-9]è¡¨ç¤ºåŒ¹é…æ‰€æœ‰0åˆ°9çš„æ•°å­—ï¼Œ[a-z]è¡¨ç¤ºåŒ¹é…ä»»æ„çš„å°å†™å­—æ¯ï¼‰ã€‚
8ã€ä»¥å¹å·"!"è¡¨ç¤ºä¸å¿½ç•¥(è·Ÿè¸ª)åŒ¹é…åˆ°çš„æ–‡ä»¶æˆ–ç›®å½•ï¼Œå³è¦å¿½ç•¥æŒ‡å®šæ¨¡å¼ä»¥å¤–çš„æ–‡ä»¶æˆ–ç›®å½•ï¼Œå¯ä»¥åœ¨æ¨¡å¼å‰åŠ ä¸ŠæƒŠå¹å·ï¼ˆ!ï¼‰å–åã€‚éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼šå¦‚æœæ–‡ä»¶çš„çˆ¶ç›®å½•å·²ç»è¢«å‰é¢çš„è§„åˆ™æ’é™¤æ‰äº†ï¼Œé‚£ä¹ˆå¯¹è¿™ä¸ªæ–‡ä»¶ç”¨"!"è§„åˆ™æ˜¯ä¸èµ·ä½œç”¨çš„ã€‚ä¹Ÿå°±æ˜¯è¯´"!"å¼€å¤´çš„æ¨¡å¼è¡¨ç¤ºå¦å®šï¼Œè¯¥æ–‡ä»¶å°†ä¼šå†æ¬¡è¢«åŒ…å«ï¼Œå¦‚æœæ’é™¤äº†è¯¥æ–‡ä»¶çš„çˆ¶çº§ç›®å½•ï¼Œåˆ™ä½¿ç”¨"!"ä¹Ÿä¸ä¼šå†æ¬¡è¢«åŒ…å«ã€‚å¯ä»¥ä½¿ç”¨åæ–œæ è¿›è¡Œè½¬ä¹‰ã€‚


#               è¡¨ç¤ºæ­¤ä¸ºæ³¨é‡Š,å°†è¢«Gitå¿½ç•¥
*.a             è¡¨ç¤ºå¿½ç•¥æ‰€æœ‰ .a ç»“å°¾çš„æ–‡ä»¶
!lib.a          è¡¨ç¤ºä½†lib.aé™¤å¤–
/TODO           è¡¨ç¤ºä»…ä»…å¿½ç•¥é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ TODO æ–‡ä»¶ï¼Œä¸åŒ…æ‹¬ subdir/TODO
build/          è¡¨ç¤ºå¿½ç•¥ build/ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œè¿‡æ»¤æ•´ä¸ªbuildæ–‡ä»¶å¤¹ï¼›
doc/*.txt       è¡¨ç¤ºä¼šå¿½ç•¥doc/notes.txtä½†ä¸åŒ…æ‹¬ doc/server/arch.txt
 
bin/:           è¡¨ç¤ºå¿½ç•¥å½“å‰è·¯å¾„ä¸‹çš„binæ–‡ä»¶å¤¹ï¼Œè¯¥æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰å†…å®¹éƒ½ä¼šè¢«å¿½ç•¥ï¼Œä¸å¿½ç•¥ bin æ–‡ä»¶
/bin:           è¡¨ç¤ºå¿½ç•¥æ ¹ç›®å½•ä¸‹çš„binæ–‡ä»¶
/*.c:           è¡¨ç¤ºå¿½ç•¥cat.cï¼Œä¸å¿½ç•¥ build/cat.c
debug/*.obj:    è¡¨ç¤ºå¿½ç•¥debug/io.objï¼Œä¸å¿½ç•¥ debug/common/io.objå’Œtools/debug/io.obj
**/foo:         è¡¨ç¤ºå¿½ç•¥/foo,a/foo,a/b/fooç­‰
a/**/b:         è¡¨ç¤ºå¿½ç•¥a/b, a/x/b,a/x/y/bç­‰
!/bin/run.sh    è¡¨ç¤ºä¸å¿½ç•¥binç›®å½•ä¸‹çš„run.shæ–‡ä»¶
*.log:          è¡¨ç¤ºå¿½ç•¥æ‰€æœ‰ .log æ–‡ä»¶
config.php:     è¡¨ç¤ºå¿½ç•¥å½“å‰è·¯å¾„çš„ config.php æ–‡ä»¶
 
/mtk/           è¡¨ç¤ºè¿‡æ»¤æ•´ä¸ªæ–‡ä»¶å¤¹
*.zip           è¡¨ç¤ºè¿‡æ»¤æ‰€æœ‰.zipæ–‡ä»¶
/mtk/do.c       è¡¨ç¤ºè¿‡æ»¤æŸä¸ªå…·ä½“æ–‡ä»¶
 
è¢«è¿‡æ»¤æ‰çš„æ–‡ä»¶å°±ä¸ä¼šå‡ºç°åœ¨gitä»“åº“ä¸­ï¼ˆgitlabæˆ–githubï¼‰äº†ï¼Œå½“ç„¶æœ¬åœ°åº“ä¸­è¿˜æœ‰ï¼Œåªæ˜¯pushçš„æ—¶å€™ä¸ä¼šä¸Šä¼ ã€‚
 
éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œgitignoreè¿˜å¯ä»¥æŒ‡å®šè¦å°†å“ªäº›æ–‡ä»¶æ·»åŠ åˆ°ç‰ˆæœ¬ç®¡ç†ä¸­ï¼Œå¦‚ä¸‹ï¼š
!*.zip
!/mtk/one.txt
 
å”¯ä¸€çš„åŒºåˆ«å°±æ˜¯è§„åˆ™å¼€å¤´å¤šäº†ä¸€ä¸ªæ„Ÿå¹å·ï¼ŒGitä¼šå°†æ»¡è¶³è¿™ç±»è§„åˆ™çš„æ–‡ä»¶æ·»åŠ åˆ°ç‰ˆæœ¬ç®¡ç†ä¸­ã€‚ä¸ºä»€ä¹ˆè¦æœ‰ä¸¤ç§è§„åˆ™å‘¢ï¼Ÿ
æƒ³è±¡ä¸€ä¸ªåœºæ™¯ï¼šå‡å¦‚æˆ‘ä»¬åªéœ€è¦ç®¡ç†/mtk/ç›®å½•ä¸­çš„one.txtæ–‡ä»¶ï¼Œè¿™ä¸ªç›®å½•ä¸­çš„å…¶ä»–æ–‡ä»¶éƒ½ä¸éœ€è¦ç®¡ç†ï¼Œé‚£ä¹ˆ.gitignoreè§„åˆ™åº”å†™ä¸ºï¼šï¼š
/mtk/*
!/mtk/one.txt
 
å‡è®¾æˆ‘ä»¬åªæœ‰è¿‡æ»¤è§„åˆ™ï¼Œè€Œæ²¡æœ‰æ·»åŠ è§„åˆ™ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦æŠŠ/mtk/ç›®å½•ä¸‹é™¤äº†one.txtä»¥å¤–çš„æ‰€æœ‰æ–‡ä»¶éƒ½å†™å‡ºæ¥ï¼
æ³¨æ„ä¸Šé¢çš„/mtk/*ä¸èƒ½å†™ä¸º/mtk/ï¼Œå¦åˆ™çˆ¶ç›®å½•è¢«å‰é¢çš„è§„åˆ™æ’é™¤æ‰äº†ï¼Œone.txtæ–‡ä»¶è™½ç„¶åŠ äº†!è¿‡æ»¤è§„åˆ™ï¼Œä¹Ÿä¸ä¼šç”Ÿæ•ˆï¼
 
----------------------------------------------------------------------------------
è¿˜æœ‰ä¸€äº›è§„åˆ™å¦‚ä¸‹ï¼š
fd1/*
è¯´æ˜ï¼šå¿½ç•¥ç›®å½• fd1 ä¸‹çš„å…¨éƒ¨å†…å®¹ï¼›æ³¨æ„ï¼Œä¸ç®¡æ˜¯æ ¹ç›®å½•ä¸‹çš„ /fd1/ ç›®å½•ï¼Œè¿˜æ˜¯æŸä¸ªå­ç›®å½• /child/fd1/ ç›®å½•ï¼Œéƒ½ä¼šè¢«å¿½ç•¥ï¼›
 
/fd1/*
è¯´æ˜ï¼šå¿½ç•¥æ ¹ç›®å½•ä¸‹çš„ /fd1/ ç›®å½•çš„å…¨éƒ¨å†…å®¹ï¼›
 
/*
!.gitignore
!/fw/ 
/fw/*
!/fw/bin/
!/fw/sf/
è¯´æ˜ï¼šå¿½ç•¥å…¨éƒ¨å†…å®¹ï¼Œä½†æ˜¯ä¸å¿½ç•¥ .gitignore æ–‡ä»¶ã€æ ¹ç›®å½•ä¸‹çš„ /fw/bin/ å’Œ /fw/sf/ ç›®å½•ï¼›æ³¨æ„è¦å…ˆå¯¹bin/çš„çˆ¶ç›®å½•ä½¿ç”¨!è§„åˆ™ï¼Œä½¿å…¶ä¸è¢«æ’é™¤ã€‚



cat ~/.gitconfig	// æŸ¥çœ‹ gitconfig å…§å®¹
-v --verbose
-q --quiet
--progress


Git 1.7.0 å¾Œï¼ŒåŠ å…¥ Sparse Checkout æ¨¡å¼ï¼Œä½¿ Checkout æŒ‡å®šæ–‡ä»¶æˆ–æ–‡ä»¶å¤¾æˆå¯èƒ½ã€‚
git config core.sparsecheckout true	// é–‹å•Ÿ Sparse Checkout æ¨¡å¼
echo "druid/doc" >> .git/info/sparse-checkout	// è¨­ç½®éœ€ Check Out çš„æ–‡ä»¶
git pull origin main	// Check Out

git read-tree -mu HEAD	// å¦‚æœè¦ pull åˆ¥çš„éƒ¨ä»½æª”æ¡ˆ


-n --no-checkout	// Only .gitï¼ŒBut still non-bare repository.
--bare		// è£¸å­˜å„²åº«ï¼ŒOnly .gitã€no workspaceã€‚åœ¨å‰µå»ºè£¸å€‰åº«æ™‚ï¼ŒGit å‡å®šè£¸å€‰åº«å°‡ä½œç‚ºå¤šå€‹é ç¨‹ç”¨æˆ¶(several remote users)çš„ origin repositoryï¼Œå› æ­¤å®ƒä¸æœƒå‰µå»º default remote originã€‚é€™æ„å‘³è‘—åŸºæœ¬ git pull å’Œ git push æ“ä½œå°‡ä¸èµ·ä½œç”¨ï¼Œå› ç‚º Git å‡å®šæ²’æœ‰å·¥ä½œå€ï¼Œæ‚¨ä¸æ‰“ç®—å‘è£¸å­˜å„²åº«æäº¤ä»»ä½•æ›´æ”¹ï¼š
~/Projects/bare$ git push
fatal: No destination configured to push to.
~/Projects/bare$ git pull
fatal: /usr/lib/git-core/git-pull cannot be used without a working tree.
~/Projects/bare$ 
(--bare means no checkout)
--mirror
-l --local
--no-hardlinks
-s --shared
--recurse-submodules[=<pathspec>]
--recursive ...
-j --jobs <n>

git push -f origin HEAD^:master		// å–æ¶ˆé ç«¯çš„ push

commit æ²’ç”¨ -m æœƒå•Ÿå‹•æ–‡æœ¬ç·¨è¼¯å™¨ä»¥ä¾¿è¼¸å…¥æœ¬æ¬¡æäº¤çš„èªªæ˜ã€‚(é»˜èªå•Ÿç”¨ shell çš„ç’°å¢ƒè®Šé‡ $EDITOR æ‰€æŒ‡å®šçš„è»Ÿä»¶ï¼Œä¸€èˆ¬éƒ½æ˜¯ vimã€emacsï¼Œå¯ä½¿ç”¨ git config --global core.editor å‘½ä»¤è¨­å®šå–œæ­¡çš„ç·¨è¼¯å™¨)
1. æŒ‰ i é€²å…¥ insert æ¨¡å¼
2. ä¿®æ”¹æœ€ä¸Šé¢é‚£è¡Œé»ƒè‰²æäº¤èªªæ˜
3. æŒ‰ Esc 
4. :wq (é›¢é–‹)

ZZ(å…©æ¬¡å¤§å¯«Z)é›¢é–‹ git editor

mkdir/md
rmdir/rd
cd
rm
git init

--------------------------------------------------
1. fetchã€2. mergeã€rebaseã€3. pull

The short answer to question #1 is: Git picks one of your remotes to fetch from, and then fetches from that remote. The remote Git picks is from the remote = name setting under the [branch] section. If there isn't any such setting, Git uses origin.

The answer to question #2 is: Git picks some name to use, as if you had run git merge name or git rebase name. The name is based on the merge = ref setting under the [branch] sectionâ€”but the way this works is somewhat obscure: if this same section says, for instance, remote = origin and branch = refs/heads/master, the name Git picks to use is not master but rather origin/master. If it says remote = origin and branch = develop, the name Git picks is origin/develop, and so on.

(While this looks very straightforward, the actual mapping inside Git is rather tricky: if the section says remote = . and branch = master, the name is master, not ./master, for instance. If you set up unusual fetch refspecs, even more weirdness can happen. This answer does not cover this last case at all.)

The answer to question #3 is in some ways the easiest: git pull simply runs git fetch first, thenâ€”provided that succeedsâ€”one of the other two commands, git merge or git rebase, so you really only have to look at questions 1 and 2.
--------------------------------------------------


æœ¬åœ°åˆ†æ”¯é‡å‘½å(æœªæ¨é€åˆ°é ç¨‹)
git branch -m <oldName> <newName>

é ç¨‹åˆ†æ”¯é‡å‘½å(å·²æ¨é€é ç¨‹ï¼Œå‡è¨­æœ¬åœ°åˆ†æ”¯å’Œé ç¨‹å°æ‡‰åˆ†æ”¯åç¨±ç›¸åŒ)
git branch -m <oldName> <newName>	// é‡å‘½åé ç¨‹åˆ†æ”¯å°æ‡‰çš„æœ¬åœ°åˆ†æ”¯
git push --delete origin oldName		// åˆªé™¤é ç¨‹åˆ†æ”¯
git push origin <newName>		// ä¸Šå‚³æ–°å‘½åçš„æœ¬åœ°åˆ†æ”¯
git branch --set-upstream-to origin/newNameã€git branch -u origin/newName	// æŠŠä¿®æ”¹å¾Œçš„æœ¬åœ°åˆ†æ”¯èˆ‡é ç¨‹åˆ†æ”¯é—œè¯
git push -u origin newName		// åˆä½µä¸Šè¿°å…©è¡Œ

git branch --unset-upstream [branchName]	// è§£é™¤ç•¶å‰æˆ–å…¶ä»–åˆ†æ”¯çš„é ç¨‹åˆ†æ”¯é—œè¯
git br -u origin/name name	// ä¸åˆ‡æ›åˆ†æ”¯ç›´æ¥è¨­ç½®å…¶ä»–åˆ†æ”¯çš„ upstream
git push -u origin name : name	// æˆ– push çš„æ™‚å€™ç›´æ¥è¨­ç½®
git remote addã€git branch --set-upstream-to	// å‰è€…æŠŠæ‰€æœ‰çš„é ç¨‹åˆ†æ”¯éƒ½æŠ“ä¸‹ä¾†ï¼Œå¾Œè€…å¯ä»¥å–®ç¨è·Ÿè¹¤åˆ†æ”¯

git branch
git branch <new-branch>
git branch -d <local-branch>	// åˆªé™¤åˆ†æ”¯
git checkout <local-branch>
git checkout -b <new-branch>	// åˆ°é”æ–°å‰µå»ºåˆ†æ”¯ï¼ŒåŒåå‰‡å ±éŒ¯
git checkout -B <new-branch>	// æœ‰åŒååˆ†æ”¯ä¹Ÿè¦å¼·åˆ¶è¦†è“‹
git checkout --orphan <new_branch>	// åŸºæ–¼ç•¶å‰æ‰€åœ¨åˆ†æ”¯å‰µå»ºä¸€å€‹ç„¡æäº¤æ­·å²ç´€éŒ„çš„åˆ†æ”¯
git checkout --merge <branch>	// å°‡ç•¶å‰çš„åˆ†æ”¯åŒæ­¥åˆ°å‰å¾€çš„åˆ†æ”¯
^^^ éœ€è¦æ³¨æ„ï¼š
1. å¦‚æœç•¶å‰åˆ†æ”¯å’Œåˆ‡æ›åˆ†æ”¯é–“çš„å…§å®¹ä¸åŒçš„è©±ï¼Œå®¹æ˜“é€ æˆè¡çªã€‚
2. åˆ‡æ›åˆ°æ–°åˆ†æ”¯å¾Œï¼Œç•¶å‰åˆ†æ”¯ä¿®æ”¹éçš„å†…å®¹å°±ä¸Ÿå¤±äº†ã€‚
git checkout -p <branch>	// æ¯”è¼ƒå…©å€‹åˆ†æ”¯æˆ–æ–‡ä»¶ä¸­çš„å·®ç•°
git checkout --track -b foobar origin/foobar å°‡é ç«¯çš„ branch checkout å›ä¾†ä¸¦å»ºç«‹ä¸€å€‹æ–°çš„ local branchï¼ŒåŠ ä¸Š --track è¡¨ç¤ºä½ ä¹‹å¾Œé‚„è¦pullã€pushå›å»ï¼Œæ‰€ä»¥è«‹ Git è¨˜ä½å°æ‡‰é—œä¿‚ã€‚


ls -a						// æŸ¥çœ‹æª”æ¡ˆ(å«éš±è—)	MacOS: ll -la
./ ../ .git/
rm -rf .git						// åˆªé™¤å€‰åº«æ–‡ä»¶å¤¾ä¸‹éš±è—çš„ .git æ–‡ä»¶å¤¾(åˆ†æ”¯åˆªé™¤)
git log -p -2					// -p é¡¯ç¤ºæ¯ç­†æäº¤çš„ä¿®æ”¹å…§å®¹ï¼›-2 é™åˆ¶åªè¼¸å‡ºæœ€å¾Œå…©ç­†
git log --pretty=oneline
git clone <url>					// ä¸‹è¼‰é ç«¯æ•¸æ“šåº«
git clone -b develop --single-branch			// è¤‡è£½æŒ‡å®šçš„åˆ†æ”¯
git rebase --abort					// ä»£ç¢¼å›é€€

git status
git add <file>
git add -A						// ç•¶å‰ç›®éŒ„ä¸‹æ‰€æœ‰æ–‡ä»¶åŠ å…¥æš«å­˜

git restore <file>					// å¾ index ä¸­å›æº¯
git commit -m <message>
git commit -am <message> / git commit -a -m <message>	// -a / --allï¼Œè¦æ³¨æ„ untracked files ç‹€æ…‹çš„æª”æ¡ˆä¸å—æ­¤å‘½ä»¤ä½œç”¨

git remote add <é ç«¯æ•¸æ“šåº«ç°¡ç¨±> <url>			// åŠ å…¥é ç«¯æ•¸æ“šåº«
git remote set-url origin --push --add <é ç«¯æ•¸æ“šåº«ç°¡ç¨±> <url>	// å¤šäº†ä¸€äº› arguments
git remote						// è§€çœ‹é ç«¯æ•¸æ“šåº«åˆ—è¡¨
git remote -v					// è§€çœ‹é ç«¯æ•¸æ“šåº«åˆ—è¡¨(åŒ…å« url)
git remote add origin https://github.com/rsosor/demo.git
git remote add origin git@github.com:rsosor/demo.git

git fetch <remote name> é€™å€‹æŒ‡ä»¤ä¸€æ¬¡åªèƒ½æ›´æ–°ä¸€å€‹ remote
å¦‚æœä½ çš„å°ˆæ¡ˆåº•ä¸‹æœ‰å¤šå€‹ remoteï¼Œè€Œä¸”å…¨éƒ¨éƒ½æƒ³è¦æ›´æ–°çš„è©±ï¼Œå°±å¯ä»¥ä½¿ç”¨é€™å€‹æŒ‡ä»¤
git fetch --all æŒ‡ä»¤ä¹Ÿç­‰åŒæ–¼ä»¥ä¸‹é€™å€‹æŒ‡ä»¤
$ git remote update

git pull
git pull --rebase origin main	// rebase å°±ä¸æœƒæœ‰åˆä½µè£œä¸(Merge Patch)ï¼Œå¦‚æœ conflict æ¯”è¼ƒå¤šå‰‡éœ€è¦ä¾æ¬¡è™•è£¡ä¸ä½¿ç”¨ rebaseã€‚æƒ³è¦æŠŠ rebase ç•¶åš git pull çš„é è¨­å€¼ï¼Œå¯ä»¥åœ¨å°ˆæ¡ˆçš„ .git/config åŠ ä¸Š
git pull çš„ä½œç”¨ç­‰åŒæ–¼ä»¥ä¸‹çš„æŒ‡ä»¤
$ git fetch <remote name>
$ git merge remotes/<remote name>/<remote branch>
git merge origin/<repo> --allow-unrelated-histories
git pull origin/<repo> --allow-unrelated-histories


[branch "master"]
  remote = origin
  merge = refs/heads/master
  rebase = true

ä¹Ÿå¯ä»¥ç›´æ¥åŠ åˆ° ~/.gitconfig è®“æ‰€æœ‰çš„ tracked branches éƒ½è‡ªå‹•å¥—ç”¨é€™å€‹è¨­å®šï¼š


[branch]  
  autosetuprebase = always

git pull (<local_branch_name> origin/<remote_branch_name>) å»é ç«¯ fetch æ–°ç‰ˆä¸¦ merge é€² local branch
å¦‚æœè¦ºå¾—é€™ç¨® local branch å’Œ remote branch çš„ merge commit log å¾ˆç…©ï¼Œå»ºè­°å¯ä»¥æ”¹ä½¿ç”¨ git pull â€“rebase è®Šæˆ fast-forward å½¢å¼ (å°±æœƒè®Šå¾—åƒ svn upï¼Œè€Œä¸æœƒæœ‰ merge commit log)ã€‚ç°¡å–®èªªå°±æ˜¯å…ˆç æ‰ local branch åˆ†å²”é»ä¹‹å¾Œè‡ªå·±çš„ commitï¼Œç„¶å¾ŒæŠŠé ç«¯çš„ commit å…ˆä¸€å€‹å€‹ apply é€²ä¾†ï¼Œæœ€å¾Œå†æŠŠè‡ªå·±çš„ commit å† apply é€²å» (å¦‚æœæœ‰ conflict æœƒä¸­é€”åœä¸‹ä¾†ï¼Œç­‰ä½ ä¿®å¥½æ‰æœƒç¹¼çºŒ apply)ï¼Œå¦‚æ­¤ä¸€ä¾†çœ‹ç·šåœ–å°±æœƒè®Šæˆä¸€æ¢ç·šè€Œå·²ï¼Œä¹Ÿå°±æ²’æœ‰æ‰€è¬‚ merge é€™å€‹å‹•ä½œäº†ã€‚

git push
git push <æ•¸æ“šåº«ç°¡ç¨±> <åˆ†æ”¯åç¨±>
git push origin main
git push -u origin main
git push -u origin main -f	// -f å¼·åˆ¶ force
git push é è¨­çš„é ç«¯æ˜¯ originï¼Œä¸¦ä¸”æœƒå°‡æ‰€æœ‰æœ‰å’Œ remote æœ‰å°æ‡‰çš„ local branch éƒ½ push ä¸Šå»ã€‚å¦‚æœè¦æŠŠæ–°çš„ local branch push ä¸Šå»ï¼Œéœ€è¦ä¸‹ git push origin <local_vranch_name> æŒ‡ä»¤ã€‚
git push ä¹Ÿå¯èƒ½æœƒå¤±æ•—ï¼Œä¾‹å¦‚å‡ºç¾ ! [rejected] master -> master (non-fast forward)ï¼Œé€™å€‹ non-fast forward çš„æ„æ€æ˜¯ä½ çš„ parent commit å’Œé ç«¯çš„ä¸ç›¸åŒï¼Œä¹Ÿå°±æ˜¯ç·šåœ–æœ‰åˆ†å²”ï¼Œéœ€è¦å…ˆ pull å›ä¾†è™•ç†å¥½ merge æ‰èƒ½ push ä¸Šå»ã€‚
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Git commit ä¿®æ”¹ä¹‹ 1 â€“ git commit --amend
é€éé€™æ¨£çš„æ–¹å¼ä¿®æ”¹å¾Œ git commit hash æœƒè®Šå¾—èˆ‡åŸæœ¬ä¸ç›¸ç¬¦ï¼Œå°æ¯”å‰é¢çš„ commit hash å°±èƒ½çœ‹åˆ°ä¸åŒã€‚è¦ä¸Šå‚³åˆ° GitHub çš„è©±æœƒéœ€è¦ force pushï¼š
--amendï¼šåƒæ•¸åªèƒ½ä¿®æ”¹æœ€å¾Œä¸€æ¬¡ Commit çš„è¨Šæ¯

Git commit ä¿®æ”¹ä¹‹ 2 â€“ git commit --author --date
--author --dateï¼šä½œè€…è·Ÿæ™‚é–“æ›æ‰
git commit --amend --author="Guido van Rossum <guido@python.org>" --date="Wed Feb 16 14:00 2011 +0100"
--date æ ¼å¼æ”¯æ´ä¸‰ç¨®ï¼šGit internal formatã€RFC 2822ã€ISO 8601
æœ‰å…©é»å½è£ç¼ºå¤±
1. GitHub commit log çš„é é¢ä¸Šè®Šæˆäº† gvanrossum commited with John Doe on Feb 16 2011
æˆ‘å¸Œæœ›è®Šæˆæ˜¯ Guido ä¸Šå‚³çš„ï¼Œè€Œä¸æ˜¯ commited with John Doeã€‚
2. repo é¦–é çš„åœ°æ–¹ README.md çš„ä¿®æ”¹æ™‚é–“å»é¡¯ç¤ºç‚º 3 minutes ago â€¦â€¦ï¼Ÿ
æ‡‰è©²è¦æ˜¯ 6 years agoã€‚
çœ‹çœ‹å®Œæ•´çš„ Git informations â€“ git cat-file
åŸä¾† git log ä¸¦ä¸æ˜¯å®Œæ•´çš„è³‡è¨Šï¼Œå®Œæ•´è³‡è¨Šè¦ä½¿ç”¨ git cat-file æ‰æœƒé¡¯ç¤ºå‡ºä¾†ï¼š
git cat-file -p HEAD
tree f93e3a1a1525fb5b91020da86e44810c87a2d7bc
author Guido van Rossum <guido@python.org> 1297861200 +0100
committer John Doe <johndoe@example.com> 1496243512 +0800
 
Amend the commit message

Author è·Ÿ Committer æ˜¯ä¸åŒçš„ï¼Œæ‰€ä»¥ GitHub æ‰æœƒé¡¯ç¤ºç‚º committed with John Doeã€‚

Git commit ä¿®æ”¹ä¹‹ 3 â€“ committer
ç”¨ git config æŠŠ user.name ä¿®æ”¹å°±å¯ä»¥äº†ï¼š
git config user.name "Guido van Rossum"
git config user.email "guido@python.org"
Git commit ä¿®æ”¹ä¹‹ 4 â€“ committer date
å‰©ä¸‹ Git committer date éœ€è¦ä¿®æ”¹ï¼Œä¿®æ”¹ä¸èƒ½ä½¿ç”¨ --date ä¾†æ”¹ï¼Œé€™æ¨£åªæœƒä¿®æ”¹åˆ° Author çš„æ—¥æœŸã€‚å¿…é ˆè¦é€é environment variable GIT_COMMITTER_DATE ä¾†åšä¿®æ­£ï¼šGIT_COMMITTER_DATE ä¸€æ¨£å¯ä»¥æ¥å—ä¸‰ç¨®æ ¼å¼ã€‚
GIT_COMMITTER_DATE="Wed Feb 16 14:00 2011 +0100" git commit --amend

æ©ï¼Œcommit log é¡¯ç¤º gvanrossum committed on 16 Feb 2011ï¼Œè€Œ repo é¦–é  README.md çš„ commit æ™‚é–“é¡¯ç¤ºç‚º 6 years agoã€‚

è‡³æ–¼æœ‰æ²’æœ‰è¾¦æ³•è®“ git commit è®Šå¾—å¯ä¿¡å‘¢ï¼Ÿå…¶å¯¦æ˜¯æœ‰çš„ï¼Œè«‹åƒè€ƒ Git Pro: Signing Your Workï¼Œè£¡é¢æœ‰æåˆ°å¦‚ä½•ä½¿ç”¨ GPG ä¾†ç°½ç½² Git commitï¼Œéå¸¸å€¼å¾—ä¸€è®€ã€‚è‡³æ–¼è¢« GPG  ç°½ç½²éçš„ commit åœ¨æ³•å¾‹ä¸Šæœ‰æ²’æœ‰æ•ˆåŠ›èƒ½å¤ ä»£è¡¨ä¸€å€‹è‡ªç„¶äººçš„æ‰€ä½œæ‰€ç‚º (GPG key å°æ‡‰åˆ°è‡ªç„¶äºº)ï¼Œé€™æˆ‘å°±ä¸çŸ¥é“äº†ã€‚

git rebaseï¼šå¦‚æœæƒ³è¦ä¿®æ”¹å…¶å®ƒæ›´æ—©çš„è¨Šæ¯
git rebase -i <sha-1>		// -i æŒ‡è¦é€²å…¥ rebase æŒ‡ä»¤çš„ã€Œäº’å‹•æ¨¡å¼ã€ï¼Œsha-1 æ˜¯æŒ‡æ‡‰ç”¨ç¯„åœã€Œå¾ç¾åœ¨åˆ° sha-1 é€™å€‹ commit(ä¸åŒ…æ‹¬é€™å€‹ commit)ã€ï¼Œæ­¤æŒ‡ä»¤æœƒè·³å‡º Vimã€‚

å‰é¢çš„ pick æ„æ€æ˜¯ã€Œä¿ç•™é€™æ¬¡ commit ä¸åšä¿®æ”¹ã€
å‡è¨­æŠŠé€™ä¸‰è¡Œ
pick sha-1 <message>
pick sha-1 <message>
pick sha-1 <message>
å‰é¢çš„ pick æ”¹æˆ reword æˆ– r
reword sha-1 <message>
reword sha-1 <message>
reword sha-1 <message>
è¡¨ç¤ºè¦ä¿®æ”¹é€™ä¸‰æ¬¡ commit çš„è¨Šæ¯ã€‚å­˜æª”ä¸¦é›¢é–‹ä¹‹å¾Œï¼Œç«‹é¦¬å°±æœƒå†è·³å¦ä¸€å€‹ Vim ç·¨è¼¯å™¨ç•«é¢ï¼š
æœƒæœ‰ä¸‰æ¬¡çš„ reword

å¦‚æœä½ ä»”ç´°çœ‹ï¼Œé‚£å…©æ¬¡ Commit çš„ SHA-1 å€¼éƒ½è®Šäº†ã€‚
åœ¨ã€Œå¦ä¸€ç¨®åˆä½µæ–¹å¼ï¼ˆä½¿ç”¨ rebaseï¼‰ã€ï¼ŒCommit ç‰©ä»¶ä¸¦ä¸æ˜¯å‰ªä¸‹ã€è²¼ä¸Šè€Œå·²ï¼Œè€Œå› ç‚ºè¦æ¥çš„å‰ä¸€å€‹ Commit ä¸åŒï¼ˆå…¶å¯¦æ™‚é–“ä¹Ÿä¸åŒï¼‰ï¼Œæ‰€ä»¥æœƒé‡æ–°è¨ˆç®—ä¸¦åšå‡ºä¸€é¡†æ–°çš„ Commitã€‚

å› ç‚º Commit ç‰©ä»¶çš„è¨Šæ¯ä¹Ÿæœƒå½±éŸ¿ SHA-1 çš„è¨ˆç®—ï¼Œå› ç‚ºè¨Šæ¯æ”¹äº†ï¼Œæ‰€ä»¥ Git æœƒåšå‡ºæ–°çš„ Commit ç‰©ä»¶ä¾†æ›¿ä»£åŸæœ¬èˆŠçš„ Commitã€‚
ä¸åªé€™æ¨£ï¼Œåœ¨å‰›å‰›é€™å€‹ä¾‹å­è£¡ï¼Œå› ç‚ºé€™ä¸‰é¡† Commit ç‰©ä»¶æ›æ‰äº†ï¼Œåœ¨å®ƒä¹‹å¾Œçš„ Commit å› ç‚ºå‰é¢çš„æ­·å²æ”¹äº†ï¼Œæ‰€ä»¥å¾Œé¢æ•´ä¸²çš„ Commit å…¨éƒ¨éƒ½é‡æ–°åšå‡ºæ–°çš„ Commit å‡ºä¾†æ›¿ä»£èˆŠçš„ Commitã€‚

å¦‚æœæƒ³è¦å–æ¶ˆé€™å›çš„ Rebase çš„è©±ï¼Œåªè¦é€™æ¨£ï¼š
git reset ORIG_HEAD --hard
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
å‰› git clone å®Œåªæœƒæœ‰æœ¬åœ° main åˆ†æ”¯ï¼Œå¦‚ä½•åˆ‡æ›åˆ°é ç¨‹åˆ†æ”¯ï¼š
git checkout -b newBranch  origin/newBranch
git branch newBranch origin/newBranch


git rm --cached test.js		// å¦‚æœæˆ‘å€‘æƒ³å°‡å¿½ç•¥æ–‡ä»¶æ·»åŠ åˆ°ç·©å­˜ä¸­ï¼Œrm å‘½ä»¤å°‡å…¶å¾ä¸­ç§»é™¤


# git branch --track frontend origin/frontend
git pull <branch> = git fetch <branch> && git merge <branch>

å…¶ä»–æ“ä½œï¼š
git fetch æŠŠé ç«¯çš„ branch æ›´æ–°ä¸‹è¼‰å›ä¾†ï¼Œä½†ä¸æœƒ merge åˆ° local branch
git branch -r é¡¯ç¤º local æœ‰è¿½è¹¤çš„é ç«¯ branchã€‚æ³¨æ„åˆ°ä½ ä¸èƒ½ç›´æ¥ä¿®æ”¹é€™å€‹ remote branchï¼Œä¸€å®šè¦ç”¨ä¸€å€‹ local branch å°æ‡‰å®ƒã€‚
git remote show origin é¡¯ç¤ºé ç«¯ server çš„ branch
git remote add foobar git:// å¯ä»¥æ–°å¢åˆ¥çš„ repo. ä½ç½®ï¼Œæ–¼æ˜¯ pull çš„æ™‚å€™å°±å¯ä»¥æŒ‡å®šè¦å¾å“ªä¸€å€‹é ç«¯æ›´æ–°å›ä¾†ã€‚
git push origin :foobar åˆªé™¤é ç«¯çš„ branch
--------------------------------------------------
å¦‚æœè¦æ› branch çš„æš«æ™‚çš„è§£æ±ºæ–¹å¼æ˜¯ä½¿ç”¨ git stash æœƒå…ˆæŠŠä¿®æ”¹æš«å­˜ä¸‹ä¾†ï¼Œè¦å›å¾©å‰‡åŸ·è¡Œ git stash popã€‚
$ git stash // å„²å­˜å·¥ä½œå€
Saved working directory and index state WIP on feature-entryForm: 432811f ä¿®æ”¹æ¨£å¼
 
$ git stash list  // æŸ¥çœ‹å„²å­˜ç´€éŒ„
stash@{0}: WIP on feature-entryForm: 432811f ä¿®æ”¹æ¨£å¼
 
$ git status
On branch feature-entryForm
Your branch is up to date with 'origin/feature-entryForm'.
 
nothing to commit, working tree clean

   ï¼ˆ1ï¼‰ç”¨ git stash applyï¼Œæ¢å¾©å¾Œï¼Œstash å…§å®¹ä¸¦ä¸åˆªé™¤ï¼Œéœ€è¦ç”¨ git stash drop ä¾†åˆªé™¤

   ï¼ˆ2ï¼‰ç”¨ git stash popï¼Œæ¢å¾©çš„åŒæ™‚æŠŠ stash å…§å®¹ä¹Ÿåˆªäº†

ä¸Ÿå¤± stashï¼Œæ‰¾å› commitID æœ‰å…©ç¨®æ–¹æ³•ï¼š

    1ã€git stash pop æœ€å¾Œæœƒå°å‡º pop æ‰çš„ commitId å€¼ï¼Œè‹¥é€™å€‹ç´€éŒ„é‚„å­˜åœ¨å°±ç›´æ¥ä½¿ç”¨ã€‚

    2ã€git fsck --lost-found æœƒå°å‡ºæ‰€æœ‰ dangling commitã€‚

å¤§æ¦‚æœ‰ä¸‰ç¨®é¡å‹çš„å…§å®¹ï¼Œblobã€tree å’Œ commitã€‚
æˆ‘å€‘é€™æ¨£çœ‹ä¸å‡ºæœ‰ç”¨ä¿¡æ¯ï¼Œéœ€è¦å¦å¤–ä¸€æ¢å‘½ä»¤é¡¯ç¤ºï¼š
git show commitId
--------------------------------------------------
å°±ç®—æŠŠé‚„æ²’å®Œæˆçš„æ±è¥¿ commit ä¹Ÿä¸æœƒæ€éº¼æ¨£ï¼Œåªè¦é‚„æ²’ push å‡ºå»ä¸€åˆ‡ commit ç´€éŒ„éƒ½æ˜¯å¯ä»¥æ”¹çš„ã€‚
å¯ä»¥ä½¿ç”¨é€™å€‹å‘½ä»¤ä¾†å–æ¶ˆ commitï¼š
git reset --soft HEAD^
git reset --hard HEAD^	// å›é€€åˆ°ä¸Šå€‹ç‰ˆæœ¬
git reset --hard commit_id	// é€€åˆ°/é€²åˆ° æŒ‡å®š commit_id
git reflog	// æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯çš„æ‰€æœ‰æ“ä½œç´€éŒ„åŒ…æ‹¬ commit ã€å·²ç¶“è¢«åˆªé™¤çš„ commit å’Œ reset çš„æ“ä½œ

git add --patch	// æŠŠä¸€å€‹æª”æ¡ˆåˆ‡æˆå¥½å¹¾æ¬¡ commit(å¾ä¸Šåˆ°ä¸‹æ˜¯æ–°~èˆŠ stack FILOæ„Ÿè¦º)
æˆ‘æƒ³æŠŠé€™æ¬¡ index.js æ–°å¢çš„å…§å®¹åˆ†æ¬¡æäº¤ï¼Œé‚£å°±ä¸‹ git add -p index.jsï¼Œæ¥è‘—æŒ‰ e é€²åˆ°ç·¨è¼¯ç•«é¢ï¼Œæœ‰ + é–‹é ­çš„å°±æ˜¯ä½ é€™æ¬¡æ–°å¢çš„å…§å®¹
å°±å¯ä»¥æŠŠæƒ³ add çš„åŠ è™Ÿç•™è‘—ï¼Œå…¶ä»–ä¸æƒ³ add çš„éƒ¨åˆ†åˆªæ‰ï¼Œgit å°±åªæœƒæŠŠæœ‰åŠ è™Ÿçš„é‚£å¹¾è¡ŒåŠ é€² staging areaï¼Œè€Œå…¶ä»–åˆªæ‰çš„éƒ¨åˆ†å°±ç¹¼çºŒç•™åœ¨ unstaged ç‹€æ…‹
ç¿’æ…£ç”¨ GUI çš„è©±ï¼Œå¤§éƒ¨åˆ†çš„ IDE ä¹Ÿæœƒæä¾› add patchï¼Œåªè¦æŠŠæƒ³åŠ å…¥ Staging é¸èµ·ä¾†ï¼Œç„¶å¾Œé» Stage Selected Ranges å°±å¥½

Git rebase
ä»»å‹™ä¸€ï¼šèª¿æ•´ commit é †åº
git rebase -i {7ç¢¼}	// -i æ˜¯ interactive çš„æ„æ€ï¼Œ{} æ˜¯åŸºæº–ä½ç½®çš„ commit IDï¼Œä»£è¡¨æˆ‘è¦ç”¨ interactive rebase ä¾†èª¿æ•´æŸ commit åˆ°ä¹‹å¾Œçš„ commit
æŒ‰ç…§é †åºæŠŠé€™äº› commit çš„è®Šæ›´ç–ŠåŠ èµ·ä¾†è€Œæˆçš„(å¾ä¸Šåˆ°ä¸‹æ˜¯èˆŠ~æ–°)
åªè¦èª¿æ•´ pick çš„é †åºï¼Œä¾‹å¦‚æŠŠ Add file3 ç§»åˆ°æœ€ä¸‹é¢ï¼ŒGit å°±æœƒæŒ‰ç…§ 1 -> 2 -> 4 -> 5 -> 3 çš„é †åºæŠŠ commit ç–ŠåŠ èµ·ä¾†ï¼Œç”¢ç”Ÿæœ€æ–°çš„ main
çµæŸ rebase ä¹‹å¾Œï¼Œä¹‹å‰ main çš„æ‰€åœ¨ä½ç½®æœƒè¢«æ”¹åå« ORIG_HEAD
å°æ–¼ rebase å¾Œçš„çµæœä¸æ»¿æ„çš„è©±ï¼Œåªè¦ä¸‹ git reset --hard ORIG_HEAD å°±èƒ½å›åˆ°ä¹‹å‰ 1 -> 2 -> 3 -> 4 -> 5 çš„é †åº

ä»»å‹™äºŒï¼šåˆªé™¤ commit
pick æŒ‡ä»¤æ”¹æˆ drop å°±å¥½äº†ã€‚



Git æœ‰ä¸‰å€‹é…ç½®æ–‡ä»¶ï¼šç‰ˆæœ¬åº«ç´šåˆ¥ã€å…¨å±€(ç”¨æˆ¶ä¸»ç›®éŒ„ä¸‹)ã€ç³»çµ±ç´šï¼Œæ¡ç”¨çš„æ˜¯ INI æ–‡ä»¶æ ¼å¼ï¼Œç¯€ã€éµã€å€¼çµ„æˆã€‚
[user]
	name = <name>
	email = <email>
[core]
	repositoryformatversion = 0
	filemode = true
	bare = false
	logallrefupdates = true
[remote "origin"]
	url = <url>
	fetch = +refs/heads/*:refs/remotes/origin/*
[branch "main"]
	remote = origin
	merge = refs/heads/master

ï¼ˆ1. ç‰ˆæœ¬åº«ç´šåˆ¥é…ç½®æ–‡ä»¶ï¼‰
root/.git/config
ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼šä¸‰ç¨®æ–¹å¼
1.1 ç”¨ VIM æ‰“é–‹é…ç½®æ–‡ä»¶
1.2 ç”¨å‘½ä»¤æ‰“é–‹é…ç½®æ–‡ä»¶
git config -e
1.3 ç”¨å‘½ä»¤ä¿®æ”¹å±¬æ€§å€¼
1.3.1 è¨­ç½®éµå€¼
git config <section>.<key> <value>
git config a.b something
[a]
	b = something
1.3.2 è®€å–éµå€¼
git config <section>.<key>
git config a.b
something
1.3.3 åˆªé™¤
git config --unset <section>.<key>
1.3.4 git config æ“ä½œå…¶ä»–çš„ INI æ ¼å¼æ–‡ä»¶(åŒ…æ‹¬ä¸åœ¨ git å·¥ä½œå€çš„æ–‡ä»¶)
git_config = filename git config <section>.<key> <value>
git_config = filename git config <section>.<key>
filename åŒ…æ‹¬æ–‡ä»¶çš„è·¯å¾‘ï¼Œæ²’è·¯å¾‘é è¨­ç•¶å‰ç›®éŒ„ï¼Œå¦‚æœæ²’æœ‰æ­¤æ–‡ä»¶ï¼Œå‰µå»ºæ–‡ä»¶ã€‚

ï¼ˆ2. å…¨å±€é…ç½®æ–‡ä»¶ï¼‰
~/.gitconfig
git config --global <section>.<key> <value>
git config --global <section>.<key>
git config --global -e
ï¼ˆ3. ç³»çµ±é…ç½®æ–‡ä»¶ï¼‰
/etc/gitconfig
å¯ä»¥ç”¨ git config --system -e æ‰“é–‹é…ç½®æ–‡ä»¶
git config --system <section>.<key> <value>
git config --system <section>.<key>
git config --system -e

Windowsä¸Šgit status é¡¯ç¤ºä¸­æ–‡äº‚ç¢¼		// git config --global core.quotepath false

___________________________________________________________________________________________________________________________________________________________________________________________________________________
æŸ¥çœ‹åˆ†æ”¯
git branch #åˆ—å‡º**æœ¬åœ°**æ‰€æœ‰çš„åˆ†æ”¯
æŸ¥çœ‹åˆ†æ”¯è¯¦ç»†ä¿¡æ¯
git branch -v #åˆ—å‡ºæœ¬åœ°æ‰€æœ‰çš„åˆ†æ”¯, + hash ä¿¡æ¯
æŸ¥çœ‹åˆ†æ”¯ä¸è¿œç¨‹çš„å…³è”
git branch -vv #åˆ—å‡ºæœ¬åœ°æ‰€æœ‰çš„åˆ†æ”¯, + hash ä¿¡æ¯ + ä¸è¿œç¨‹çš„å…³è”ä¿¡æ¯
è™½ç„¶é»˜è®¤æœ¬åœ°å’Œè¿œç¨‹å¤§éƒ¨åˆ†éƒ½æ˜¯åŒåçš„, ä½†æ˜¯åœ¨å¤šåˆ†æ”¯çš„åœºæ™¯ä¸‹è¿˜æ˜¯ä¼šå‡ºç°ä¸åŒåçš„æƒ…å†µ
é€šè¿‡è¿™ä¸ªå‘½ä»¤è¿›è¡Œç¡®è®¤, éå¸¸å¥½ç”¨.

æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯
git branch -a #åˆ—å‡ºæ‰€æœ‰çš„åˆ†æ”¯(è¿œç¨‹å’Œæœ¬åœ°)
è¿™ä¸ªå‘½ä»¤åœ¨æ‹‰å–åˆ«äººçš„åˆ†æ”¯çš„æ—¶å€™éå¸¸æœ‰ç”¨, æ¯”å¦‚

git branch -a | grep xxx
git checkout -b xxx origin/xxx
___________________________________________________________________________________________________________________________________________________________________________________________________________________
keep
ï¼ç§»å‹•æœ¬åœ°åº«HEADæŒ‡é‡
ï¼é‡ç½®å·¥ä½œå€

æœ¬åœ°ä»£ç¢¼æ˜¯ä½ å›é€€ç‰ˆæœ¬çš„ä»£ç¢¼ï¼Œè€Œæš«å­˜å€æ²’æœ‰åšä»»ä½•æ”¹è®Šã€‚

æ¨¡å¼		mixed æ¨¡å¼	soft æ¨¡å¼		hard æ¨¡å¼

å·¥ä½œç›®éŒ„		ä¸è®Š		ä¸è®Š		ä¸Ÿæ‰

æš«å­˜å€		ä¸Ÿæ‰		ä¸è®Š		ä¸Ÿæ‰



æ¨¡å¼			mixed æ¨¡å¼ï¼ˆé è¨­ï¼‰	soft æ¨¡å¼		hard æ¨¡å¼

Commit æ‹†å‡ºä¾†çš„æª”æ¡ˆ	ä¸Ÿå›å·¥ä½œç›®éŒ„		ä¸Ÿå›æš«å­˜å€	ç›´æ¥ä¸Ÿæ‰
___________________________________________________________________________________________________________________________________________________________________________________________________________________

1.1ã€git reset [-q] [<commit>] [--] <paths>...
èªªæ˜ï¼šä½¿ç”¨æŒ‡å®šæäº¤ä¸‹çš„æ–‡ä»¶æ›¿æ›æš«å­˜å€çš„æ–‡ä»¶(å…©å€‹ -- ç‚ºäº†é¿å…è·¯å¾‘å’Œå¼•ç”¨æŒ‡å‘çš„æäº¤åŒåè¡çª)ï¼Œä¸æœƒæ”¹è®Šå·¥ä½œå€å’Œå¼•ç”¨æŒ‡å‘çš„æäº¤
ä¾‹å¦‚ï¼šgit reset HEAD <paths>ç›¸å½“äºgit add <paths> çš„åæ“ä½œ

1.2ã€git reset (--patch | -p) [<tree-ish>] [--] [<paths>...]
èªªæ˜ï¼šé¸æ“‡æ€§å°‡æŒ‡å®šæäº¤çš„æ–‡ä»¶å…§å®¹æ›¿æ›æš«å­˜å€çš„æ–‡ä»¶å…§å®¹
ä¾‹å¦‚ï¼šgit reset -p HEAD <paths> ç›¸ç•¶æ–¼ git add -p <paths> çš„åæ“ä½œ

ï¼ˆæ¯”å° HEAD èˆ‡æŒ‡å®šç‰ˆæœ¬å·®ç•°ï¼‰
git diff		// æ¯”å° HEAD èˆ‡å…¨éƒ¨ unstaged æª”æ¡ˆçš„å·®ç•°
git diff --cached	// æ¯”å° HEAD èˆ‡å…¨éƒ¨ staged æª”æ¡ˆçš„å·®ç•°
git diff --staged	// æ­¤ç‚º --cached çš„åˆ¥å
git diff HEAD	// æ¯”å° HEAD èˆ‡å…¨éƒ¨ unstaged, staged æª”æ¡ˆçš„å·®ç•°
é€™é‚Šçš„ HEAD ä¹Ÿå¯ä»¥æ›æˆæœ€æ–° commit ç´€éŒ„çš„ SHA-1 å€¼æˆ–æ˜¯æŒ‡å®šæ¯”å°çš„ç‰ˆæœ¬ HEAD^ / HEAD~1

ç°¡å–®èªªæ˜æ¯”å°çš„æ¨™ç¤ºï¼š
diff --gitï¼šå°‡å“ªå…©å€‹æª”æ¡ˆé€²è¡Œæ¯”å°
10064ï¼šæª”æ¡ˆå±¬æ€§ï¼Œè¡¨ç¤º Regular non-executable file
100664ï¼šRegular non-executable group-writeable file
100755ï¼šRegular executable file
120000ï¼šSymbolic link
160000ï¼šGitlink
@@ -1,3 +1,7 @@ï¼šå‰é¢ç‚ºèˆŠç‰ˆæœ¬ç¸½è¡Œæ•¸ï¼Œå¾Œé¢ç‚ºæ–°ç‰ˆæœ¬ç¸½è¡Œæ•¸

git diff HEAD~1
åœ¨æ·»åŠ æŒ‡å®šç‰ˆæœ¬çš„ git diff æŒ‡ä»¤ä¸­ï¼Œé è¨­æ¯”å°çš„æ˜¯ HEAD (é€™æŒ‡æœ€æ–° commit ç´€éŒ„)ï¼Œä½†ä½ æœƒç™¼ç¾å®ƒé€£åŒ uncommitted çš„å…§å®¹ä¹Ÿé€²è¡Œäº†æ¯”å°ï¼Œå»ºè­°å¦‚æœè¦æŒ‡å®šç‰ˆæœ¬é€²è¡Œæ¯”å°ï¼Œæœ€å¥½åœ¨ç„¡ uncommitted ç‹€æ…‹ä¸‹é€²è¡Œæ¯”å°ï¼Œé¿å…æ··äº‚ï¼ŒåŸ·è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
git add .
git commit -m "edit index.html all.css"

git diff HEAD~2
é€™æ¨£å°±å¯ä»¥ç¢ºä¿ç•¶å‰æ¯”å°çš„ç‰ˆæœ¬ç‚º HEAD (æŒ‡æœ€æ–° commit ç´€éŒ„) èˆ‡ HEAD çš„å‰ä¸€å€‹ç‰ˆæœ¬ã€‚

ï¼ˆæ¯”å°ä¸åŒç‰ˆæœ¬é–“å·®ç•°ï¼‰
äº‹å¯¦ä¸Šï¼Œå‰›å‰›çš„ git diff HEAD~2 ç­‰åŒæ–¼ä»¥ä¸‹æŒ‡ä»¤ï¼š
git diff HEAD^^ HEAD
æˆ‘å€‘å¯ä»¥æ¯”å°æŒ‡å®šå…©å€‹ç‰ˆæœ¬é–“çš„å·®ç•°ï¼Œå‰é¢çš„ HEAD^^ ä»£è¡¨è¼ƒèˆŠçš„ç‰ˆæœ¬ï¼Œå¾Œé¢çš„ HEAD ä»£è¡¨è¼ƒæ–°çš„ç‰ˆæœ¬ï¼Œåƒè¬ä¸è¦æŠŠå…©è€…å¯«åäº†ï¼Œé€™æ¨£çš„çµæœä¹Ÿæœƒæ˜¯ç›¸åçš„ï¼Œè®“æˆ‘å€‘è©¦è©¦æ¯”è¼ƒä¸åŒçš„ç‰ˆæœ¬ï¼š
HEAD ä»£è¡¨çš„æ˜¯æˆ‘å€‘ç•¶å‰æ‰€åœ¨çš„ç‰ˆæœ¬ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ SHA-1 å€¼ä½œç‚ºæ¯”å°çš„ä¾æ“šï¼Œä»»ä½•èƒ½ä»£è¡¨ commit ç¯€é»çš„ç¨±è¬‚éƒ½å¯ä»¥ã€‚

ï¼ˆä½¿ç”¨ difftool æ¯”å°æª”æ¡ˆï¼‰
é€šé git bash é…ç½® difftool (VSCode ç¤ºç¯„)ï¼š
git config --global diff.tool vscode
git ocnfig --global difftool.vscode.cmd 'code --wait --diff $LOCAL $REMOTE'
é€šé .gitconfig é…ç½® difftool (VSCode ç¤ºç¯„)ï¼š
[diff]
    tool = vscode
[difftool "vscode"]
    cmd = code --wait --diff $LOCAL $REMOTE

æ­¤æ™‚å³å¯ä½¿ç”¨ difftool æ¯”å°æª”æ¡ˆï¼š
git difftool -y HEAD^	// -y ä»£è¡¨åŒæ„
ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å…¨å±€é—œé–‰å°è©±æç¤ºï¼š
git config --global difftool.prompt false

ï¼ˆå›é¡§ï¼‰
# çœç•¥ git add æäº¤è‡³æœ¬åœ°æ•¸æ“šåº« (é™ä»¥è¿½è¹¤æˆ–å­˜åœ¨æ–¼ç´¢å¼•å€æª”æ¡ˆ)
git commit -am 'message'

# çœç•¥ git add æäº¤è‡³æœ¬åœ°æ•¸æ“šåº« (åŒä¸Š)
git commit -a -m 'message'

# æ¯”å° HEAD èˆ‡å°šæœªé€²ç´¢å¼•å€æª”æ¡ˆå·®ç•°
git diff

# æ¯”å° HEAD èˆ‡å·²é€²ç´¢å¼•å€æª”æ¡ˆå·®ç•°
git diff --cached

# æ¯”å° HEAD èˆ‡å·²é€²ç´¢å¼•å€æª”æ¡ˆå·®ç•° (åŒä¸Š)
git diff --staged

# æ¯”å° HEAD èˆ‡ uncommitted æª”æ¡ˆå·®ç•°
git diff HEAD

# æ¯”å° uncommitted èˆ‡æŒ‡å®šç‰ˆæœ¬å·®ç•° (ç•¶å‰ç‚º uncommitted ç‹€æ…‹)
git diff HEAD~1

# æ¯”å° HEAD èˆ‡æŒ‡å®šç‰ˆæœ¬å·®ç•° (ç•¶å‰ç‚º nothing to commit ç‹€æ…‹)
git diff HEAD^

# æ¯”å°å…©å€‹ä¸åŒç‰ˆæœ¬é–“å·®ç•° (èˆŠç‰ˆæœ¬ - æ–°ç‰ˆæœ¬)
git diff HEAD^^ HEAD

# å°‡ VSCode è¨­ç‚º difftool é»˜èªé–‹å•Ÿå·¥å…·
git config --global diff.tool vscode
git config --global difftool.vscode.cmd 'code --wait --diff $LOCAL $REMOTE'

# å…¨å±€é—œé–‰ difftool å°è©±æç¤º
git config --global difftool.prompt false
___________________________________________________________________________________________________________________________________________________________________________________________________________________
git reset -p lyrics.txt #ç”¨å½“å‰åˆ†æ”¯HEADæŒ‡å‘çš„ç‰ˆæœ¬åº“å†…å®¹æ›¿æ¢æš‚å­˜åŒºçš„å†…å®¹
s # åˆ†å‰²æˆæ›´å°çš„å—
n #ä¸æ›¿æ¢æš‚å­˜åŒºçš„å†…å®¹
y #æ›¿æ¢æš‚å­˜åŒºçš„å†…å®¹
git diff --cached lyrics.txt #æŸ¥çœ‹æš‚å­˜åŒºå’Œç‰ˆæœ¬åº“çš„åŒºåˆ«


y - è¿™å—ä»æš‚å­˜åŒºé€€å‡º
n - è¿™å—ä¸ä»æš‚å­˜åŒºé€€å‡º
q - é€€å‡º ä¸åšä»»ä½•æ“ä½œ
a - å°†æ­¤å—å’Œä¹‹åçš„å—éƒ½é€€å‡ºæš‚å­˜åŒº
d - å°†æ­¤å—å’Œä¹‹åçš„å—éƒ½ä¸é€€å‡ºæš‚å­˜åŒº
g - åœ¨è¾“å…¥så é€‰æ‹©è·³å»é‚£ä¸€ä¸ªå—
/  - åœ¨è¾“å…¥så ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ‰¾åˆ°å—
j - ç¦»å¼€å½“å‰æœªå†³å®šçš„å—ï¼Œè·³åˆ°ä¸‹ä¸€ä¸ªæœªå†³å®šçš„å—
J - ç¦»å¼€å½“å‰æœªå†³å®šçš„å—, è·³åˆ°ä¸‹ä¸€ä¸ªå—
k - ç¦»å¼€å½“å‰æœªå†³å®šçš„å—, è·³åˆ°å‰ä¸€ä¸ªæœªå†³å®šçš„å—
K - ç¦»å¼€å½“å‰æœªå†³å®šçš„å—, è·³åˆ°å‰ä¸€ä¸ªçš„å—
s - å°†å½“å‰å—åˆ†å‰²ä¸ºæ›´å°çš„å—(æ³¨æ„è¿åœ¨ä¸€èµ·çš„ä¸èƒ½è¢«åˆ†å‰²çš„å†å°äº†)
e - ç¼–è¾‘å½“å‰å—
? - æ‰“å°å¸®åŠ©

1.3 git reset [--soft | --mixed [-N] | --hard | --merge | --keep] [-q] [<commit>]
è¯´æ˜ï¼šæ­¤æ“ä½œä¼šé‡ç½®æäº¤çš„å¼•ç”¨
ä¾‹å­ä¸­ä½¿ç”¨çš„åˆå§‹ç¯å¢ƒéƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š

1.3.1ã€ä¸‰ç§åŠ¨ä½œ
1âƒ£ï¸ æ›¿æ¢å¼•ç”¨çš„æŒ‡å‘ï¼ŒæŒ‡å‘æ–°çš„æäº¤ã€‚
2âƒ£ï¸ æ›¿æ¢æš‚å­˜åŒºã€‚æš‚å­˜åŒºå†…å®¹å°†å’ŒæŒ‡å®šçš„æäº¤å†…å®¹ä¸€æ ·ã€‚
3âƒ£ï¸ æ›¿æ¢å·¥ä½œåŒºã€‚å·¥ä½œåŒºå’ŒæŒ‡å®šçš„æäº¤å†…å®¹ä¸€æ ·ã€‚

1.3.2ã€ ä¸åŒçš„å‚æ•°ä¼šæ‰§è¡Œä¸åŒçš„åŠ¨ä½œ
-- soft : git reset --soft <commit>
åªæ‰§è¡ŒåŠ¨ä½œ 1âƒ£ï¸ã€‚
ğŸŒ°ä¸¾ä¸ªæ —å­:
æ¨¡æ‹Ÿä¸€æ¬¡é”™è¯¯çš„æäº¤ï¼Œæ’¤é”€æäº¤åï¼Œå†æŸ¥çœ‹æ•ˆæœ

git commit -m "æˆ‘å¥½åƒå†™äº†ä¸€ä¸ªé”™è¯¯çš„æäº¤è¯´æ˜"
git log --oneline --graph
git reset --soft HEAD^ # HEAD^ åœ¨å½“å‰å†µä¸‹ç›¸å½“äºæœ€åä¸€æ¬¡æäº¤çš„å‰ä¸€æ¬¡æäº¤
git diff #æŸ¥çœ‹å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„åŒºåˆ«
git diff --cached #æŸ¥çœ‹æš‚å­˜åŒºå’Œç‰ˆæœ¬åº“çš„åŒºåˆ«

ç»“æœè¯´æ˜ï¼šå·¥ä½œåŒºå’Œæš‚å­˜åŒºéƒ½æ¢å¤åˆ°äº†åˆå§‹ç¯å¢ƒçš„æ ·å­ï¼Œåªæœ‰ä¸Šä¸€æ¬¡æäº¤æ¶ˆå¤±äº†ã€‚
æ³¨ï¼šä¿®è¡¥æäº¤å‘½ä»¤ git commit --amendï¼Œç”¨äºå°†æœ€æ–°çš„æäº¤è¿›è¡Œé‡æ–°æäº¤ä»¥ä¿®è¡¥é”™è¯¯çš„æäº¤è¯´æ˜ã€‚å…¶ç›¸å½“äºæ‰§è¡Œäº†å¦‚ä¸‹å‘½ä»¤ï¼ˆ.git/COMMIT_EDITMSGä¿å­˜äº†ä¸Šæ¬¡çš„æäº¤æ—¥å¿—ï¼Œå¯ä»¥ç›´æ¥ä¿®æ”¹ï¼‰

git reset --soft HEAD^
git commit -e -F .git/COMMIT_EDITMSG

--mixed git reset --mixed [-N] <commit>
ä¸å¸¦å‚ï¼Œåˆ™é»˜è®¤ä¸ºæ­¤å‚æ•°ã€‚æ‰§è¡ŒåŠ¨ä½œ1âƒ£ï¸2âƒ£ï¸ã€‚
ğŸŒ°ä¸¾ä¸ªæ —å­

git commit -m "æˆ‘æ¥è¯•ä¸€ä¸‹ --mixed"
git log --oneline --graph
git reset d6ea103 #æ­¤å¤„çš„ d6ea10 åªæ˜¯æˆ‘çš„ä¸Šæ¬¡æäº¤idï¼Œä¸å…·æœ‰æ™®éæ€§
# git reset --mixed d6ea103 ç­‰åŒäºä¸Šä¸€ä¸ªå‘½ä»¤
# git reset --mixed HEAD^ åŒä¸Š æ­¤å‘½ä»¤å…·æœ‰æ™®éæ€§
git diff #æŸ¥çœ‹å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„åŒºåˆ«
git diff --cached #æŸ¥çœ‹æš‚å­˜åŒºå’Œç‰ˆæœ¬åº“çš„åŒºåˆ«

ç»“æœè¯´æ˜ï¼šgit diffå¯ä»¥å¾ˆæ˜æ˜¾çœ‹å‡ºæ¥ä¹‹å‰åŠ å…¥æš‚å­˜åŒºçš„æ—¢æ›¿ä½™ä»¥è•™çº•å…®ï¼Œåˆç”³ä¹‹ä»¥æ½èŒã€‚ï¼Œç°åœ¨å·²ç»è¢«é€€å‡ºæš‚å­˜åŒºäº†ã€‚ä½†æ˜¯æœ¬åœ°æ–‡ä»¶æ²¡æœ‰å˜åŒ–ã€‚

--hard git reset --hard <commit>
æ‰§è¡ŒåŠ¨ä½œ1âƒ£ï¸2âƒ£ï¸3âƒ£ï¸ã€‚æ…ç”¨ï¼Œä¼šæ”¹æ‰å·¥ä½œåŒºæ–‡ä»¶ã€‚
git commit -m "æˆ‘å†æ‚„å’ªå’ªè¯•ä¸€ä¸‹ --hard"
git log --oneline --graph
git log --pretty=oneline
git reset --hard HEAD^
git diff #æŸ¥çœ‹å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„åŒºåˆ«
git diff --cached #æŸ¥çœ‹æš‚å­˜åŒºå’Œç‰ˆæœ¬åº“çš„åŒºåˆ«
git diff HEAD #æŸ¥çœ‹å·¥ä½œåŒºå’Œç‰ˆæœ¬åº“çš„åŒºåˆ«
cat lyrics.txt #æŸ¥çœ‹ lyrics.txt çš„å†…å®¹

ç»“æœè¯´æ˜ï¼šå¯ä»¥çœ‹åˆ°å·¥ä½œåŒºã€æš‚å­˜åŒºã€ç‰ˆæœ¬åº“éƒ½æ²¡æœ‰ä»»ä½•åŒºåˆ«äº†ï¼Œå†çœ‹çœ‹ lyrics.txt çš„å†…å®¹ï¼Œå°±å¯ä»¥å‘ç°åˆšåˆšå·¥ä½œåŒºçš„æ”¹åŠ¨å…¨éƒ½ä¸è§äº† Â¯\_(ãƒ„)_/Â¯ï¼Œå¦‚æœæœ‰éœ€è¦çš„æ”¹åŠ¨ï¼Œä»æœªæäº¤è¿‡çš„å†…å®¹çœŸçš„æ˜¯å‡‰å‡‰ã€‚ä½†æ˜¯ä¹‹å‰æäº¤è¿‡çš„541c01c (HEAD -> master) æˆ‘å†æ‚„å’ªå’ªè¯•ä¸€ä¸‹ --hardçš„å†…å®¹æ—¢æ›¿ä½™ä»¥è•™çº•å…®ï¼Œåˆç”³ä¹‹ä»¥æ½èŒã€‚è¿˜æ˜¯å¯ä»¥æ‰¾å›æ¥çš„ ----- [æ’¤é”€ååˆåæ‚”å¾…è¡¥å……]

--merge git reset --merge <commit>
å¦‚æœæ’¤é”€çš„æ˜¯ä¸Šä¸€ä¸ªæ“ä½œæ˜¯ git pullï¼Œæ‰§è¡ŒåŠ¨ä½œ1âƒ£ï¸2âƒ£ï¸3âƒ£ï¸ã€‚å·¥ä½œåŒºå¦‚æœæœ‰æ”¹åŠ¨çš„è¯ï¼Œä¼šåœæ­¢é‡ç½®ã€‚æ…ç”¨ï¼Œä¼šæ”¹æ‰å·¥ä½œåŒºæ–‡ä»¶ã€‚
å¦‚æœæ’¤é”€çš„æ˜¯ä¸Šä¸€ä¸ªæ“ä½œæ˜¯ git mergeï¼Œåˆ™æ‰§è¡ŒåŠ¨ä½œ1âƒ£ï¸3âƒ£ï¸ã€‚è™½ç„¶å·¥ä½œåŒºæœ¬åœ°æ–‡ä»¶è¢«é‡ç½®äº†ï¼Œä½†æ˜¯æš‚å­˜åŒºä¼šæœ‰ä¹‹å‰æœ¬åœ°çš„ä¿®æ”¹ã€‚è¿˜æ˜¯æ…ç”¨ã€‚
ğŸŒ°æ —å­è§ git merge æ’¤é”€
--keep git reset --keep <commit>
æ‰§è¡ŒåŠ¨ä½œ1âƒ£ï¸2âƒ£ï¸3âƒ£ï¸ã€‚ä½†æ˜¯å·¥ä½œåŒºå¦‚æœæœ‰æœªæäº¤çš„å†…å®¹çš„è¯ï¼Œä¼šåœæ­¢é‡ç½®ã€‚æ…ç”¨ï¼Œä¼šæ”¹æ‰å·¥ä½œåŒºæ–‡ä»¶ã€‚
ğŸŒ°ä¸¾ä¸ªæ —å­
ä¸ºäº†æ–¹ä¾¿å†™æ³¨é‡Š(#å¼€å¤´çš„ä¸ºæ³¨é‡Š)ï¼Œæ­¤æ¬¡æŠŠæ‰€æœ‰çš„éƒ½æ‹·ä¸‹æ¥ï¼Œå›¾ç‰‡è¿˜åœ¨åé¢æœ‰é™„ ^_^


#å…ˆå°†åˆå§‹ç¯å¢ƒçš„æš‚å­˜åŒºå†…å®¹æäº¤äº†
steamed-bundeMacBook-Pro:gitTest steamed-bun$ git commit -m "å†ç”¨ --keep è¯•ä¸€ä¸‹å–½"
[master e8c694e] å†ç”¨ --keep è¯•ä¸€ä¸‹å–½
 1 file changed, 1 insertion(+)
#å†å°†åˆå§‹ç¯å¢ƒçš„å†…å®¹åŠ åˆ°æš‚å­˜åŒº
steamed-bundeMacBook-Pro:gitTest steamed-bun$ git add lyrics.txt 
#å†åœ¨æ–‡ä»¶ lyrics.txt ä¸­åŠ å…¥æ–°å†…å®¹
steamed-bundeMacBook-Pro:gitTest steamed-bun$ echo "æ€¨çµä¿®ä¹‹æµ©è¡å…®ï¼Œç»ˆä¸å¯Ÿå¤«æ°‘å¿ƒã€‚" >> lyrics.txt 
#æŸ¥çœ‹æ–‡ä»¶  lyrics.txt 
steamed-bundeMacBook-Pro:gitTest steamed-bun$ cat lyrics.txt 
ç¦»éªš--é«˜è€ƒå¿…èƒŒ
é•¿å¤ªæ¯ä»¥æ©æ¶•å…®ï¼Œ å“€æ°‘ç”Ÿä¹‹å¤šè‰°ã€‚
ä½™è™½å¥½ä¿®å§±ä»¥é¿ç¾å…®ï¼Œè¬‡æœè°‡è€Œå¤•æ›¿ã€‚
æ—¢æ›¿ä½™ä»¥è•™çº•å…®ï¼Œåˆç”³ä¹‹ä»¥æ½èŒã€‚
äº¦ä½™å¿ƒä¹‹æ‰€å–„å…®ï¼Œè™½ä¹æ­»å…¶çŠ¹æœªæ‚”ã€‚
æ€¨çµä¿®ä¹‹æµ©è¡å…®ï¼Œç»ˆä¸å¯Ÿå¤«æ°‘å¿ƒã€‚
#æŸ¥çœ‹å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„åŒºåˆ« 
steamed-bundeMacBook-Pro:gitTest steamed-bun$ git diff 
diff --git a/lyrics.txt b/lyrics.txt
index 9fe96f6..9b05a22 100644
--- a/lyrics.txt
+++ b/lyrics.txt
@@ -3,3 +3,4 @@
 ä½™è™½å¥½ä¿®å§±ä»¥é¿ç¾å…®ï¼Œè¬‡æœè°‡è€Œå¤•æ›¿ã€‚
 æ—¢æ›¿ä½™ä»¥è•™çº•å…®ï¼Œåˆç”³ä¹‹ä»¥æ½èŒã€‚
 äº¦ä½™å¿ƒä¹‹æ‰€å–„å…®ï¼Œè™½ä¹æ­»å…¶çŠ¹æœªæ‚”ã€‚
+æ€¨çµä¿®ä¹‹æµ©è¡å…®ï¼Œç»ˆä¸å¯Ÿå¤«æ°‘å¿ƒã€‚
#æŸ¥çœ‹æš‚å­˜åŒºå’Œç‰ˆæœ¬åº“çš„åŒºåˆ«
steamed-bundeMacBook-Pro:gitTest steamed-bun$ git diff --cached
diff --git a/lyrics.txt b/lyrics.txt
index bedad0e..9fe96f6 100644
--- a/lyrics.txt
+++ b/lyrics.txt
@@ -2,3 +2,4 @@
 é•¿å¤ªæ¯ä»¥æ©æ¶•å…®ï¼Œ å“€æ°‘ç”Ÿä¹‹å¤šè‰°ã€‚
 ä½™è™½å¥½ä¿®å§±ä»¥é¿ç¾å…®ï¼Œè¬‡æœè°‡è€Œå¤•æ›¿ã€‚
 æ—¢æ›¿ä½™ä»¥è•™çº•å…®ï¼Œåˆç”³ä¹‹ä»¥æ½èŒã€‚
+äº¦ä½™å¿ƒä¹‹æ‰€å–„å…®ï¼Œè™½ä¹æ­»å…¶çŠ¹æœªæ‚”ã€‚
#æ‰§è¡Œæ’¤å›å‘½ä»¤ å¯ä»¥çœ‹åˆ° git çš„æç¤º
steamed-bundeMacBook-Pro:gitTest steamed-bun$ git reset --keep HEAD^
error: Entry 'lyrics.txt' would be overwritten by merge. Cannot merge.
#é”™è¯¯ï¼šæ–‡ä»¶ 'lyrics.txt' å°†è¢«åˆå¹¶è¦†ç›–ï¼Œä½†æ˜¯æ— æ³•åˆå¹¶ã€‚
fatal: Could not reset index file to revision 'HEAD^'.
#è‡´å‘½ï¼šæ— æ³•å°†ç´¢å¼•æ–‡ä»¶é‡ç½®ä¸ºâ€œHEAD ^â€ã€‚
#å†è¯•ä¸€ä¸‹å°†å·¥ä½œåŒºçš„å†…å®¹å…¨éƒ¨æäº¤åˆ°æš‚å­˜åŒº
steamed-bundeMacBook-Pro:gitTest steamed-bun$ git add lyrics.txt 
#åœ¨æ‰§è¡Œæ’¤å›å‘½ä»¤ ä¾ç„¶å¤±è´¥
steamed-bundeMacBook-Pro:gitTest steamed-bun$ git reset --keep HEAD^
error: Entry 'lyrics.txt' would be overwritten by merge. Cannot merge.
fatal: Could not reset index file to revision 'HEAD^'.
#æŸ¥çœ‹å·¥ä½œåŒºå’Œæš‚å­˜åŒºç¡®å®æ— åŒºåˆ« ï¼ˆå…¶å®åº”è¯¥å…ˆæŸ¥çœ‹çš„ å›§rzï¼‰
steamed-bundeMacBook-Pro:gitTest steamed-bun$ git diff
#å°† lyrics.txt åŠ å…¥åˆ°æš‚å­˜åŒºçš„å†…å®¹æ’¤å‡º
steamed-bundeMacBook-Pro:gitTest steamed-bun$ git reset -- lyrics.txt 
Unstaged changes after reset:
M   lyrics.txt
# å¯ä»¥çœ‹åˆ°å·²å…¨éƒ¨æ’¤å‡ºäº†æš‚å­˜åŒºäº†
steamed-bundeMacBook-Pro:gitTest steamed-bun$ git diff 
diff --git a/lyrics.txt b/lyrics.txt
index bedad0e..9b05a22 100644
--- a/lyrics.txt
+++ b/lyrics.txt
@@ -2,3 +2,5 @@
 é•¿å¤ªæ¯ä»¥æ©æ¶•å…®ï¼Œ å“€æ°‘ç”Ÿä¹‹å¤šè‰°ã€‚
 ä½™è™½å¥½ä¿®å§±ä»¥é¿ç¾å…®ï¼Œè¬‡æœè°‡è€Œå¤•æ›¿ã€‚
 æ—¢æ›¿ä½™ä»¥è•™çº•å…®ï¼Œåˆç”³ä¹‹ä»¥æ½èŒã€‚
+äº¦ä½™å¿ƒä¹‹æ‰€å–„å…®ï¼Œè™½ä¹æ­»å…¶çŠ¹æœªæ‚”ã€‚
+æ€¨çµä¿®ä¹‹æµ©è¡å…®ï¼Œç»ˆä¸å¯Ÿå¤«æ°‘å¿ƒã€‚
#è¿›å…¥ vim åˆ é™¤æœ€åä¸¤å¥æ–°å†…å®¹ ç›´æ¥æ‰“å¼€æ–‡ä»¶åˆ é™¤ä¹Ÿæ˜¯ä¸€æ ·çš„ 
steamed-bundeMacBook-Pro:gitTest steamed-bun$ vim lyrics.txt 
#æŸ¥çœ‹æ–‡ä»¶å†…å®¹ å¯ä»¥çœ‹åˆ°å·²ç»ä¸è§äº†
steamed-bundeMacBook-Pro:gitTest steamed-bun$ cat lyrics.txt 
ç¦»éªš--é«˜è€ƒå¿…èƒŒ
é•¿å¤ªæ¯ä»¥æ©æ¶•å…®ï¼Œ å“€æ°‘ç”Ÿä¹‹å¤šè‰°ã€‚
ä½™è™½å¥½ä¿®å§±ä»¥é¿ç¾å…®ï¼Œè¬‡æœè°‡è€Œå¤•æ›¿ã€‚
æ—¢æ›¿ä½™ä»¥è•™çº•å…®ï¼Œåˆç”³ä¹‹ä»¥æ½èŒã€‚
#æŸ¥çœ‹åŒºåˆ«
steamed-bundeMacBook-Pro:gitTest steamed-bun$ git diff
steamed-bundeMacBook-Pro:gitTest steamed-bun$ git diff --cached
#å†æ‰§è¡Œæ’¤å›å‘½ä»¤
steamed-bundeMacBook-Pro:gitTest steamed-bun$ git reset --keep HEAD^
#å†æ¬¡æŸ¥çœ‹æ–‡ä»¶å†…å®¹ å·²ç»å¯ä»¥çœ‹åˆ°å·¥ä½œåŒºå›åˆ°äº†ä¸Šä¸€æ­¤æäº¤åçš„æƒ…å†µ
steamed-bundeMacBook-Pro:gitTest steamed-bun$ cat lyrics.txt 
ç¦»éªš--é«˜è€ƒå¿…èƒŒ
é•¿å¤ªæ¯ä»¥æ©æ¶•å…®ï¼Œ å“€æ°‘ç”Ÿä¹‹å¤šè‰°ã€‚
ä½™è™½å¥½ä¿®å§±ä»¥é¿ç¾å…®ï¼Œè¬‡æœè°‡è€Œå¤•æ›¿ã€‚
steamed-bundeMacBook-Pro:gitTest steamed-bun$ git diff 
steamed-bundeMacBook-Pro:gitTest steamed-bun$ git diff --cached
___________________________________________________________________________________________________________________________________________________________________________________________________________________
ï¼ˆErrorï¼‰
(E1)ï¼šå› ç‚º push äº†æƒ³è¦å›é€€ï¼Œç”¨äº† idea çš„ drop commit åˆªé™¤æœ¬åœ°é å›é€€çš„ commit(å¯èƒ½å°æ‡‰çš„æ˜¯ rebase æŒ‡ä»¤)ï¼Œçµæœæœ¬åœ°é ç¨‹ > æœ¬åœ°ã€‚æœ¬åœ°é ç¨‹æ˜¯ Only Read æ‹¿ä¾†è¿½è¹¤é ç¨‹ï¼Œç¾åœ¨æœ¬åœ°åˆ†æ”¯ < æœ¬åœ°é ç¨‹ã€é ç¨‹ã€‚(origin/main ä¹Ÿçœ‹ä¸è¦‹)
git push

To github.com:rsosor/RsosoR.git
 ! [rejected]        main -> main (fetch first)
error: failed to push some refs to 'github.com:rsosor/RsosoR.git'
hint: Updates were rejected because the remote contains work that you do
hint: not have locally. This is usually caused by another repository pushing
hint: to the same ref. You may want to first integrate the remote changes
hint: (e.g., 'git pull ...') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.
------------------------------------------------------------------------------------------------------------
git push origin/mainã€git push origin/main --force

fatal: 'origin/main' does not appear to be a git repository
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.
------------------------------------------------------------------------------------------------------------
(E2)ï¼šWindows æ›è¡Œ CRLFï¼ŒLinux æ›è¡Œ LFï¼Œæ‰€ä»¥åŸ·è¡Œ git add . æ™‚æœƒå‡ºç¾ warningã€‚
git add .

warning: LF will be replaced by CRLF in package.json.
The file will have its original line endings in your working directory

ï¼ˆAnswerï¼‰
(A1)ï¼šæœ¬åœ°é ç¨‹ã€é ç¨‹éƒ½é€€åˆ°æœ¬åœ°çš„åˆ†æ”¯ï¼Œorigin/main ä¹Ÿå›ä¾†äº†ã€‚
git remote remove origin
git remote add origin git@github.com:rsosor/RsosoR.git
git push origin/main --force

(A2)ï¼šç¦ç”¨è‡ªå‹•è½‰æ›ã€‚
git config core.autocrlf false
___________________________________________________________________________________________________________________________________________________________________________________________________________________
Git æ˜¯åŸºæ–¼å…ƒæ•¸æ“šæ–¹å¼åˆ†å¸ƒå¼å„²å­˜æ–‡ä»¶ä¿¡æ¯ï¼Œæœƒåœ¨æ¯ä¸€æ¬¡ clone å°‡æ‰€æœ‰ä¿¡æ¯éƒ½å–å›åˆ°æœ¬åœ°
SVN æ˜¯åŸºæ–¼æ–‡ä»¶æ–¹å¼å„²å­˜


