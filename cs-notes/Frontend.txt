ï¼ˆè¡“èªã€çŸ¥è­˜ï¼‰

ç€è¦½å™¨æ¸²æŸ“æ­¥é©Ÿï¼š

HTML	â†’Parsingã€€ã€€DOMã€€ï¼¼
			ã€€ã€€ã€€Merging
			ã€€ã€€ Render Treeã€€ã€€â†’ã€€ã€€Layoutã€€ã€€â†’ã€€ã€€Paint
CSS	â†’Parsingã€€ã€€CSSOM ï¼


å¾ HTML æª”è§£æå‡º DOM Tree
å¾ CSS     æª”è§£æå‡º CSSOM Tree
å…©è€…ç–ŠåŠ å¾Œç”¢ç”Ÿ      Render Tree
Reflowï¼šè¨ˆç®—å‡º Render Tree ä¸Šå„å€‹å…ƒç´ çš„ç‰©ç†å±¬æ€§ï¼Œå¦‚ä½ç½®ã€å¤§å°ã€åŠæ˜¯å¦çœ‹å¾—è¦‹ï¼ˆvisibleï¼‰
Repaintï¼šå°‡è¨ˆç®—çµæœè½‰ç‚ºå¯¦éš›çš„åƒç´ ï¼Œç•«åˆ°ç•«é¢ä¸Š

Reflow
å¦‚åŒå‰è¿°ï¼Œé€™å€‹æ­¥é©Ÿæœƒç”± Render Tree çš„æ ¹çµé»å‡ºç™¼ï¼Œé€æ­¥è¨ˆç®—å‡ºæ¯ä¸€å€‹å…ƒç´ çš„ä½ç½®ã€å¤§å°ï¼Œä»¥åŠæ˜¯å¦è¢«å…¶ä»–å…ƒç´ é®æ“‹ç­‰å±¬æ€§ï¼Œéœ€è¦è€—è²»å¤§é‡çš„é‹ç®—è³‡æºï¼›ä¹Ÿå› ç‚ºæ˜¯è¦è¨ˆç®—å‡ºé€™äº›å±¬æ€§ï¼Œåªè¦æ˜¯æœ‰å¯èƒ½ç‰½æ‰¯åˆ°é€™äº›å±¬æ€§çš„æ“ä½œï¼Œéƒ½æœƒè§¸ç™¼ Reflowï¼Œä¾‹å¦‚ï¼š

ï¼è¨­å®š CSS å±¬æ€§
ã€€å¤§å°ï¼šwidthã€height
ã€€æµ®å‹•ï¼šfloat
ã€€å®šä½ï¼šposition
ã€€...

ï¼ä½¿ç”¨è€…é€²è¡Œäº’å‹•
ã€€èª¿æ•´ç€è¦½å™¨è¦–çª—å¤§å°
ã€€è¼¸å…¥æ¡†çš„å…§å®¹è®Šæ›´

ï¼JavaScript
ã€€DOM æ“ä½œ
ã€€å‹•æ…‹è¼‰å…¥ CSS æ¨£å¼è¡¨
ã€€å–å¾—å…ƒç´ çš„å¤§å°æ•¸å€¼


è¼ƒéœ€æ³¨æ„ã€Œå–å¾—å…ƒç´ çš„å¤§å°æ•¸å€¼ã€é€™ä¸€é …ï¼Œç”±æ–¼ Reflow çš„è¨ˆç®—ç›¸å°æ–¼å…¶ä»–æ­¥é©Ÿéœ€è¦è¼ƒå¤šé‹ç®—æ•ˆèƒ½ï¼Œç•¶æœ‰ Reflow çš„éœ€æ±‚æ™‚ï¼Œç€è¦½å™¨ä¸æœƒé¦¬ä¸ŠåŸ·è¡Œï¼Œè€Œæ˜¯æœƒå°‡å®ƒæ”¾åˆ°å…§éƒ¨çš„ç­‰å¾…éšŠåˆ—ä¸­ï¼Œç•¶éœ€è¦æ™‚ï¼ˆæ¯ä¸€ frameï¼‰æ‰æ‰¹æ¬¡åŸ·è¡Œï¼Œä¸¦æ¸…ç©ºéšŠåˆ—ã€‚	// é€™è£¡çš„ frame ä¹Ÿå°±æ˜¯ window.requestAnimationFrame() çš„é‚£å€‹ å¹€æ•¸

è€ƒæ…®åˆ° Reflow æ‰¹æ¬¡åŸ·è¡Œçš„ç‰¹æ€§ï¼Œç•¶é–‹ç™¼è€…è¦å–å¾—å…ƒç´ çš„ç‰©ç†å±¬æ€§ä¾‹å¦‚ scrollTop æ™‚ï¼Œå¯èƒ½ç¨‹å¼åŸ·è¡Œçš„ç•¶ä¸‹æœ‰æ¨£å¼ä¿®æ”¹ä»åœ¨ç­‰å¾…éšŠåˆ—ï¼Œå°šæœª Reflow åˆ°ç•«é¢ä¸Šï¼›ç‚ºäº†é¿å…é€™æ¨£çš„ç‹€æ³ï¼Œæ¯ç•¶é–‹ç™¼è€…è¦ç²å–å…ƒç´ å¤§å°æ•¸å€¼æ™‚ï¼Œç€è¦½å™¨ä¾¿æœƒå¼·åˆ¶è§¸ç™¼ä¸€æ¬¡ Reflowã€ä»¥ç¢ºä¿ç¨‹å¼èƒ½å–åˆ°æ­£ç¢ºçš„ä½ç½®ã€‚è€Œé€™ä¹Ÿæ˜¯è¨±å¤šç¶²ç«™çš„æ»‘é¼ æ»¾è¼ªäº‹ä»¶ç›£è½æ²’å¯«å¥½ï¼Œå°±è®“æ•´å€‹ç¶²ç«™è¶…å¡çš„åŸå› ï¼

Repaint
ç¶“éäº† Reflow çš„è¨ˆç®—ï¼ŒRepaint çš„ä»»å‹™æ˜¯è¦æŠŠè¨ˆç®—çµæœè½‰æ›æˆè¢å¹•ä¸Šçš„å¯¦éš›åƒç´ é¡¯ç¤ºã€‚ç›¸æ¯”æ–¼ Reflow ï¼ŒRepaint å°±å–®ç´”å¤šäº†ï¼Œä»»ä½•å¯è¦‹å…ƒç´ çš„æ¨£å¼è®Šæ›´ï¼Œæœ€å¾Œéƒ½å¿…ç„¶éœ€è¦é‡æ–°ç¹ªè£½åˆ°ç•«é¢ä¸Šï¼Œé€™æ˜¯é›£ä»¥é¿å…çš„æ•ˆèƒ½é–‹éŠ·ã€‚


å¦‚åŒ Reflow æ®µè½æåˆ°çš„ï¼Œç”±æ–¼ Reflow æ¥µè€—æ•ˆèƒ½ï¼Œç€è¦½å™¨æœƒ è‡ªå‹•æ‰¹æ¬¡åŸ·è¡Œã€‚
ç•¶ DOM å…ƒç´ çš„æ¨£å¼è¢«ä¿®æ”¹è§¸ç™¼å‰è¿°æ­¥é©Ÿæ™‚ï¼Œç€è¦½å™¨æœƒä¾æ“šä¿®æ”¹çš„å±¬æ€§è€Œ è‡ªå‹•çœç•¥ ä¸éœ€è¦çš„æ­¥é©Ÿï¼Œé‡æ–°æ¸²æŸ“é é¢ã€‚
ä¿®æ”¹ width â†’ Reflow â†’ Repaint
ä¿®æ”¹ color  â†’ Repaint
ç†è§£ä¸Šè¿°è¦å‰‡ä¹‹å¾Œï¼Œè®€è€…æ‚¨æ‡‰è©²å°±èƒ½çŒœåˆ°è©²å¦‚ä½•å„ªåŒ– CSS æ•ˆèƒ½äº†å§ï¼Ÿâ†“æä¾›å¹¾ç¨®å¸¸è¦‹çš„æ–¹æ³•ï¼š


1. å±¬æ€§æ›¿æ›
ã€€å°‡ç‰©ç†å±¬æ€§çš„è®ŠåŒ–ï¼Œæ›æˆç›¸ä¼¼çš„å…¶ä»–å±¬æ€§è®ŠåŒ–ï¼Œä¾†ç¯€çœ Reflow çš„æ•ˆèƒ½é–‹éŠ·ï¼š

ï¼ç”¨ translate å–ä»£ top ç­‰å®šä½å±¬æ€§
ï¼ç”±æ–¼è¡¨æ ¼çš„ç‰©ç†å±¬æ€§æœƒäº’ç›¸å½±éŸ¿ï¼Œå®¹æ˜“æ”¹ä¸€æ ¼å°±æ•´å¼µè¡¨ Reflowï¼Œå¯ä»¥çš„è©±è«‹ä¸è¦ç”¨ table æ’ç‰ˆ



2. æ‰¹æ¬¡ä¿®æ”¹
ã€€ç•¶éœ€è¦ç”¨ JavaScript ä¿®æ”¹æ¨£å¼æ™‚ï¼Œç›¡é‡è®“æ¨£å¼èƒ½æ‰¹æ¬¡ç”Ÿæ•ˆï¼š

ï¼æ›¿æ› class name æˆ–ä¿®æ”¹ cssTextï¼Œè€Œä¸æ˜¯é€å€‹è¨­å®š style å±¬æ€§
ï¼é€é el.cloneNode() è¤‡è£½ä¸€ä»½ DOMï¼Œåœ¨ä¸Šé¢ä¿®æ”¹æ¨£å¼å¾Œï¼Œåœ¨æ›¿æ›åŸæœ¬çš„ DOM
ï¼é€é document.createDocumentFragment() å»ºç«‹ Document Fragmentsï¼Œç·¨è¼¯ DOM å¾Œå†åŠ å›ä¸» DOM Tree ä¸­



3. æ¸›å°‘å½±éŸ¿ç¯„åœ
ã€€å¦‚æœ Reflow æ˜¯é¿å…ä¸äº†çš„ï¼Œé‚£å°±åªèƒ½æ¸›å°‘å½±éŸ¿ç¯„åœäº†ï¼š

ï¼ç›¡é‡é¿å… DOMã€CSSOM Tree çš„å±¤ç´šéæ·±ï¼ŒåŠ å¿« Reflow çš„è¨ˆç®—
ï¼ç¨‹å¼å–å¾—å…ƒç´ ç‰©ç†å±¬æ€§æ™‚ï¼Œå°‡çµæœæš«å­˜èµ·ä¾†ï¼Œä¸è¦é‡è¤‡è§¸ç™¼è¨ˆç®—
ï¼æ”¹å‹•é »ç¹çš„åœ°æ–¹ å»ºç«‹å–®ç¨çš„åœ–å±¤ï¼ˆstacking contextï¼‰





ï¼ˆæ²’æœ‰æ¡†æ¶çš„æ—¥å­ï¼‰

é‚£æ™‚æœ€æµè¡Œçš„ã€Œå¥—ä»¶ã€jQuery ï¼Œèªæ³•ç°¡æ½”ã€ç›´è¦ºçš„ã€Œå…ƒç´ é¸å–å™¨ã€ï¼Œèªæ³•ä¾¿æ·çš„ã€Œäº‹ä»¶ç›£è½è¨»å†Šã€ï¼Œè±å¯Œçš„é–‹ç™¼è€…ç”Ÿæ…‹ç³»ç”¢å‡ºå¤§é‡é–‹æºå¥—ä»¶ï¼Œä»¥åŠæœ€é‡è¦çš„ï¼Œå¼­å¹³ç€è¦½å™¨ XHR å·®ç•°çš„ ajax å‡½å¼ï¼Œå°‡è¤‡é›œçš„ç€è¦½å™¨å·®ç•°è—åœ¨å¥—ä»¶ä¸­ï¼Œè®“é–‹ç™¼è€…åªéœ€è¦å°ˆæ³¨åœ¨æƒ³å¯¦ä½œçš„é‚è¼¯å³å¯ã€‚

é€éå¥½ç”¨çš„"å…ƒç´ é¸å–å™¨"åŠ"äº‹ä»¶ç›£è½"ï¼Œé–‹ç™¼è€…å€‘å¯ä»¥ä¾æ“šä½¿ç”¨è€…çš„è¡Œç‚ºï¼Œéˆæ´»æ“ä½œ DOM å…ƒç´ çš„çµæ§‹åŠæ¨£å¼ï¼ŒjQuery çš„é€™äº›ç‰¹è‰²ç›´åˆ° 2019 çš„ç¾åœ¨ï¼Œéƒ½ä»æ˜¯å¾ˆå¯¦ç”¨çš„åŠŸèƒ½ï¼›ä½†éš¨å°ˆæ¡ˆå¢å¤§ç¨‹å¼è¤‡é›œåº¦ä¸æ–·ä¸Šå‡ï¼Œç›´æ¥æ“ä½œ DOM çš„ç¼ºé»ä¹Ÿå°±é€æ¼¸æµ®å‡ºæª¯é¢ï¼š

é›£ä»¥ç¶­è­·
HTMLã€CSSã€JavaScript ç„¡æ³•ç¶­æŒåŸå…ˆçš„å„å¸å…¶è·ï¼Œå› ç‚ºéœ€è¦é€é JavaScript è™•ç†äº’å‹•å…§å®¹ï¼Œå‹¢å¿…è¦å°‡çµæ§‹ã€æ¨£å¼å¯«åˆ° JavaScript çš„éƒ¨ä»½ä¸­ï¼Œä¹Ÿå°±å› æ­¤é€ æˆã€Œæ¶æ§‹è€¦åˆåº¦æé«˜ã€ï¼Œç¨‹å¼ç¢¼ç®¡ç†å›°é›£ã€‚

æ•ˆèƒ½ä½è½
åœ¨ Reflow åŠ Repaint æ˜¯ä»€éº¼ï¼Ÿ ä¸­æœ‰æåˆ° Render Tree çš„æ¦‚å¿µï¼Œç•¶ DOM è¢«æ”¹è®Šï¼Œå‹¢å¿…è¦è§¸ç™¼æ•´å€‹ Reflow & Repaint çš„æµç¨‹ï¼Œé »ç¹çš„æ”¹å‹•è§¸ç™¼é‡è¤‡æ¸²æŸ“ï¼Œä¾¿æœƒè®“é é¢æ•ˆèƒ½è¢«æ¶ˆè€—æ®†ç›¡ã€‚


ï¼ˆæ¡†æ¶çš„åŠŸèƒ½ï¼‰

æœ‰å‰è¿°å•é¡Œè‡ªç„¶æœ‰å¼·è€…è©¦åœ–è§£æ±ºã€‚æ­·å²é€²ç¨‹ä¸­è¨±å¤šå¤§ç¥æ‹‹å‡ºäº†æ–¹æ³•è«–ï¼Œæˆ–å¯¦ä½œå‡ºè§£æ±ºæ–¹æ¡ˆï¼Œä½†ä¸­é–“çš„æ­·å²ç¤™æ–¼ç¯‡å¹…ç°¡ç•¥å¸¶éã€‚ç¾ä»Šçš„ã€Œæ¡†æ¶ã€å…¶å¯¦å°±æ˜¯ä¸€ç¨®æå‡é–‹ç™¼æ•ˆç‡ã€é™ä½ç¶­è­·é›£åº¦çš„é–‹ç™¼æ¶æ§‹ã€‚

è³‡æ–™èˆ‡ UI åˆ†é›¢

åŸå…ˆæƒ³é¡¯ç¤ºä¸€ç­†è³‡æ–™ï¼Œå¯èƒ½å¿…é ˆå¯«æ­»åœ¨ HTML çµæ§‹ä¸­ï¼š
<div id="root">
  <div class="card">
    <h3 class="name">Gary</h3>
    <p class="comment">something</p>
  </div>
</div>

è‹¥æ˜¯å‹•æ…‹çš„è³‡æ–™ï¼Œå¯èƒ½è¦é€é JavaScript å°‡è³‡æ–™å‹•æ…‹å¡å…¥ DOM å…ƒç´ ï¼š
let commentData = [
  { name: 'Gary', comment: 'try harder'},
  { name: 'Alice', comment: 'good'},
  { name: 'Bob', comment: 'excellent'},
  //...
]

commentData.forEach(c => {
  $('#root').append(
    $(document.createElement('div')).append(
      $(document.createElement('h3')).text(c.name),
      $(document.createElement('p')).text(c.comment)
    ).addClass('card')
  )
})

Vue ä¸­å¯èƒ½å¯«æˆé€™æ¨£ï¼š
<template>
  <div id="root">
    <div class="card" v-for="item in commentData" :key="name">
      <h3 class="name">{{item.name}}</h3>
      <p class="comment">{{item.comment}}</p>
    </div>
  </div>
</template>

<script>
export default {
  data() {
    return {
      commentData: [
        { name: 'Gary', comment: 'try harder'},
        { name: 'Alice', comment: 'good'},
        { name: 'Bob', comment: 'excellent'},
        //...
      ]
    }
  }
}
</script>
ä¹çœ‹å…©ç¨®å¥½ä¼¼ï¼Œä½†è€ƒæ…®äº†å¯è®€åŠå¯ç¶­è­·ã€‚é€é Vue çš„å¯«æ³•ï¼Œè®“é é¢çµæ§‹çš„éƒ¨ä»½ä»ç„¶ç”± HTML æ±ºå®šï¼Œä¸¦ç”±è³‡æ–™ä¾†æ±ºå®šç•«é¢è©²å¦‚ä½•å‘ˆç¾ã€‚
é—œéµç”±è³‡æ–™æ±ºå®šç•«é¢ï¼å°±æ˜¯ç¾ä»£æ¡†æ¶é‡è¦æ ¸å¿ƒæ¦‚å¿µï¼›å°‡è³‡æ–™å¾ä»‹é¢ä¸­æŠ½å‡ºï¼Œæ¯å€‹ç•«é¢éƒ½æ˜¯å°è³‡æ–™è™•ç†éå¾Œçš„å‘ˆç¾ã€‚


æ¨¡çµ„åŒ– UI
ç¶²ç«™ç¸½æ˜¯æœ‰é‡è¤‡å‡ºç¾çš„å…ƒç´ ï¼ŒæŒ‰éˆ•ã€è¼¸å…¥è¡¨å–®ã€è¡¨æ ¼ã€å°è©±æ¡†ç­‰ï¼Œåƒ FaceBook æŒ‰è®šæŒ‰éˆ•ï¼Œå¯èƒ½ä¸€é æ•¸åå€‹ï¼›ç¾ä»£æ¡†æ¶ä¸­ï¼ŒæŠŠé€™äº›é‡è¤‡å‡ºç¾å…ƒç´ ç¨± çµ„ä»¶ï¼ˆComponentsï¼‰ï¼Œæ¯å€‹çµ„ä»¶åŒ…å«äº†çµ„ä»¶è‡ªå·±éœ€è¦ç”¨çš„çµæ§‹ã€æ¨£å¼ã€é‚è¼¯ã€‚
ä¾‹å¦‚å‰è¿°ä¾‹å­ä¸‹åˆ 08:44 2021/8/29ï¼Œæˆ‘å€‘å¯ä»¥å°‡ .card é€™å€‹å…ƒç´ æŠ½æˆå–®ç¨çš„çµ„ä»¶ï¼šä¸€ä¾†å„çµ„ä»¶åªéœ€è™•ç†çµ„ä»¶å…§çš„äº‹ï¼Œå¤–éƒ¨å¼•ç”¨çš„çµ„ä»¶ä¾†æ±ºå®šæ€éº¼ä½¿ç”¨ã€æä¾›ä»€éº¼è³‡æ–™çµ¦çµ„ä»¶ï¼Œè—‰ç”±ç°¡å–®çš„åˆ‡åˆ†æ¬Šè²¬ï¼ŒåŠ ä¸Šå‰è¿°çš„ç”±è³‡æ–™æ±ºå®šç•«é¢ï¼Œè®“å„çµ„ä»¶ä»»å‹™å–®ä¸€ï¼Œä¸¦ä¸”èƒ½è¢«é‡è¤‡ä½¿ç”¨ã€‚

ç”šè‡³ç¾åœ¨æœ‰è¨±å¤šå®Œæˆåº¦å¾ˆé«˜çš„å‰ç«¯ UI çµ„ä»¶åº«ï¼Œè®“é–‹ç™¼è€…æœ‰å¦‚ç©æ¨‚é«˜ä¸€æ¨£ï¼Œèƒ½å¿«é€Ÿåœ°ç”¨çµ„ä»¶å †å‡ºæƒ³è¦çš„ç•«é¢ï¼Œå¤§å¹…åº¦é™ä½äº†çµ„ç¹”ç•«é¢æ‰€éœ€è¦çš„æ™‚é–“ï¼Œè®“å·¥ç¨‹å¸«èƒ½æ›´å°ˆæ³¨åœ¨è™•ç†å•†æ¥­é‚è¼¯ä¸Šã€‚


ï¼ˆæ•ˆèƒ½ï¼‰
é »ç¹æ“ä½œ DOM çš„æ–¹å¼æ”¹è®Šç•«é¢ï¼Œå¯èƒ½æœƒé€ æˆå…¨é é¢çš„ Reflow åŠ Repaintï¼›ä¸éåœ¨ä½¿ç”¨æ¡†æ¶æ™‚ï¼Œé–‹ç™¼è€…ä¸ç”¨å¤ªæ“”å¿ƒé€™å€‹å•é¡Œã€‚

åŸå› æ˜¯å„ä¸»æµæ¡†æ¶çš„å¯¦ä½œä¸­ï¼Œå¹¾ä¹éƒ½åŒ…å«äº†ã€ŒVirtual Domã€çš„æ¦‚å¿µï¼Œä¹Ÿå°±æ˜¯ç”¨ JavaScript ç‰©ä»¶ä¾†è¡¨é”ç•¶å‰çš„é é¢çµæ§‹ï¼›è—‰ç”±èˆ‡ UI åˆ†é›¢çš„è³‡æ–™åŠ Virtual Dom ä¹‹é–“çš„é—œä¿‚ï¼Œç•¶è³‡æ–™è®Šå‹•æ™‚ï¼Œäº‹å…ˆè¨ˆç®—å¥½é€™æ¬¡ç•«é¢éœ€è¦è®Šå‹•åœ°æ–¹ï¼Œä¾¿èƒ½æŠµéŠ·æ‰ç„¡æ„ç¾©çš„æ›´å‹•ï¼Œä¸¦é‡è¤‡åˆ©ç”¨å·²å­˜åœ¨çš„ DOM å…ƒç´ ï¼›ç•¶çœŸçš„è¦é€²è¡Œ DOM æ›´æ–°æ™‚ï¼Œä¹Ÿæœƒä¸€æ¬¡å°‡æ‰€æœ‰éœ€è¦æ›´æ–°çš„å±€éƒ¨çµ„ä»¶æ›´æ–°ï¼Œè®“æ•ˆèƒ½çš„è€—æç›¡å¯èƒ½é™ä½ã€‚

ç•¶ç„¶ï¼ŒVirtual Dom è®Šå‹•çš„è¨ˆç®—ä¹Ÿæ˜¯éœ€è¦è€—è²»é‹ç®—è³‡æºçš„ï¼Œéæ–¼ç°¡å–®çš„å°ˆæ¡ˆæˆ–æ‰¹æ¬¡çš„å¤§é‡ä¿®æ”¹ï¼Œå¾ˆæœ‰å¯èƒ½åŸç”Ÿå¯«æ³•é‚„æ¯”æ¡†æ¶å¿«ä¸Šä¸å°‘



ç¶²é è¨­è¨ˆâ†’UIUXâ†’å‰ç«¯â†’å¾Œç«¯

web layout ç¶²é åˆ‡ç‰ˆ(ä¸åšè¨­è¨ˆå–®ç´”åšå‰ç«¯ä»‹é¢ UI)	// Flexbox: å…¶ä¸­ä¸€ç¨®æ’ç‰ˆæ–¹å¼

D3: åœ–è¡¨æ•ˆæœï¼Ÿ
AJAX: è·Ÿè³‡æ–™åº«æ¥ API

1. é–‹ç‰ˆè²»(å‚³çµ±æ–¹å¼ï¼Œè¡¨é ­ã€è¡¨å°¾ç­‰)ï¼Œ5000ï¼Œå…§é é æ•¸è¨ˆç®—
ç¾åœ¨ç¶²é æŠ€è¡“æ‰€æœ‰æ±è¥¿éƒ½å¯ä»¥æ¨¡çµ„åŒ–ã€å…ƒä»¶åŒ–ï¼Œä¾‹å¦‚æŒ‰éˆ•ã€æ¨™é¡Œã€æ®µè½æ¨£å¼

1. ç¶²é ç‰ˆå‹é é¢æ•¸é‡
2. å‹•ç•«æ•ˆæœæ•¸é‡
3. ç‰¹å®šéœ€æ±‚(ç€è¦½å™¨ã€ç‰¹å®šæ¡†æ¶)
___________________________________________________________________________________________________________________________________________________________________________________________________________________
ï¼ˆHTMLï¼‰
DOM æ˜¯ HTMLã€XML å’Œ SVG æ–‡ä»¶çš„ç¨‹åºä»‹é¢ã€‚å®ƒæä¾›äº†ä¸€å€‹æ–‡ä»¶(æ¨¹)çš„çµæ§‹åŒ–è¡¨ç¤ºæ–¹æ³•ï¼Œä¸¦å®šç¾©è®“ç¨‹åºå¯ä»¥è¨ªå•ä¸¦æ›´æ”¹æ–‡ä»¶æ¶æ§‹ã€æ¨£å¼å’Œå…§å®¹çš„æ–¹æ³•(åƒç‰©ä»¶ä¸€æ¨£è¢«å­˜å–)ã€‚
W3C å®šç¾©äº†éå¸¸å¤šçš„ç¶²é è¦å‰‡å¥½è®“å„å¤§ç€è¦½å™¨å¯ä»¥æŒ‰ç…§é€™äº›è¦å‰‡å»è¨­è¨ˆç€è¦½å™¨ï¼Œå…¶ä¸­ DOM å°±æ˜¯å…¶ä¸­çš„ä¸€å€‹å®šç¾©ã€‚

HTML DOM(Document Object Model)
	æ ¹æ“šW3C DOMè¦ç¯„ï¼ŒDOMæ˜¯ä¸€ç¨®èˆ‡ç€è¦½å™¨ã€å¹³å°ã€èªè¨€ç„¡é—œçš„æ¥å£ï¼Œä½¿å¾—ä½ å¯ä»¥è¨ªå•é é¢ä¸­å…¶ä»–çš„æ¨™æº–çµ„ä»¶ã€‚DOMè§£æ±ºäº†Netscapeçš„JavaScriptå’ŒMicrosoftçš„JavaScriptä¹‹é–“çš„è¡çªï¼Œçµ¦èˆ‡Webè¨­è¨ˆå¸«å’Œé–‹ç™¼è€…æ¨™æº–æ–¹æ³•ï¼Œè®“ä»–å€‘ä¾†è¨ªå•ä»–å€‘ç«™é»ä¸­çš„æ•¸æ“šã€è…³æœ¬å’Œè¡¨ç¾å±¤å°è±¡ã€‚
	DOMæ˜¯ä»¥å±¤æ¬¡çµæ§‹çµ„ç¹”çš„ç¯€é»æˆ–ä¿¡æ¯ç‰‡æ®µçš„é›†åˆã€‚é€™å€‹å±¤æ¬¡çµæ§‹å…è¨±é–‹ç™¼äººå“¡åœ¨æ¨¹ä¸­å°èˆªå°‹æ‰¾ç‰¹å®šä¿¡æ¯ã€‚åˆ†æè©²çµæ§‹é€šå¸¸éœ€è¦åŠ è¼‰æ•´å€‹æ–‡æª”å’Œæ§‹é€ å±¤æ¬¡çµæ§‹ï¼Œæ‰èƒ½åšä»»ä½•å·¥ä½œã€‚ç”±æ–¼å®ƒæ˜¯åŸºæ–¼ä¿¡æ¯å±¤æ¬¡çš„ï¼Œå› è€ŒDOMè¢«èªç‚ºæ˜¯åŸºæ–¼æ¨¹æˆ–åŸºæ–¼å°è±¡çš„ã€‚
	HTML DOMå®šç¾©äº†è¨ªå•å’Œæ“ä½œHTMLæ–‡æª”çš„æ¨™æº–æ–¹æ³•ã€‚
	HTML DOM æŠŠHTMLæ–‡æª”å‘ˆç¾ç‚ºå¸¶æœ‰å…ƒç´ ã€å±¬æ€§å’Œæ–‡æœ¬çš„æ¨¹çµæ§‹(ç¯€é»æ¨¹)ã€‚

		Document
		       |
	              Root element:
		   <html>
   Element:				Element:
    <head>					 <body>

   Element:	Attribute:	   ____	Element:		Element:
    <title>		  "href"		    <a>		   <h1>

     Text:				  Text:		  Text:
  "My title"		               "My link"	              "My header"


Document å°±æ˜¯æŒ‡é€™ä»½æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯é€™ä»½ HTML æª”çš„é–‹ç«¯ï¼Œæ‰€æœ‰çš„ä¸€åˆ‡éƒ½æœƒå¾ Document é–‹å§‹å¾€ä¸‹é€²è¡Œã€‚

Element å°±æ˜¯æŒ‡æ–‡ä»¶å…§çš„å„å€‹æ¨™ç±¤ï¼Œå› æ­¤åƒæ˜¯ <div>ã€<p> ç­‰ç­‰å„ç¨® HTML Tag éƒ½æ˜¯è¢«æ­¸é¡åœ¨ Element è£¡é¢ã€‚

Text å°±æ˜¯æŒ‡è¢«å„å€‹æ¨™ç±¤åŒ…èµ·ä¾†çš„æ–‡å­—ï¼Œèˆ‰ä¾‹ä¾†èªªåœ¨ <h1>Hello World</h1> ä¸­ï¼Œ Hello World è¢« <h1> é€™å€‹ Element åŒ…èµ·ä¾†ï¼Œå› æ­¤ Hello World å°±æ˜¯æ­¤ Element çš„ Text

Attribute å°±æ˜¯æŒ‡å„å€‹æ¨™ç±¤å…§çš„ç›¸é—œå±¬æ€§ã€‚


ç”±æ–¼ DOM ç‚ºæ¨¹ç‹€çµæ§‹ï¼Œæ¨¹ç‹€çµæ§‹æœ€é‡è¦çš„è§€å¿µå°±æ˜¯ Node å½¼æ­¤ä¹‹é–“çš„é—œä¿‚ï¼Œé€™é‚Šå¯ä»¥åˆ†æˆä»¥ä¸‹å…©ç¨®é—œä¿‚ï¼š

çˆ¶å­é—œä¿‚(Parent and Child)
ç°¡å–®ä¾†èªªå°±æ˜¯ä¸Šä¸‹å±¤ç¯€é»ï¼Œä¸Šå±¤ç‚º Parent Node ï¼Œä¸‹å±¤ç‚º Child Node ã€‚

å…„å¼Ÿé—œä¿‚(Siblings)
ç°¡å–®ä¾†èªªå°±æ˜¯åŒä¸€å±¤ç¯€é»ï¼Œå½¼æ­¤é–“åªæœ‰ Previous ä»¥åŠ Next å…©ç¨®ã€‚


document.getElementById('idName')
æ‰¾å°‹ DOM ä¸­ç¬¦åˆæ­¤ id åç¨±çš„å…ƒç´ ï¼Œä¸¦å›å‚³ç›¸å°æ‡‰çš„ element ã€‚

document.getElementsBytagName('tag')
æ‰¾å°‹ DOM ä¸­ç¬¦åˆæ­¤ tag åç¨±çš„æ‰€æœ‰å…ƒç´ ï¼Œä¸¦å›å‚³ç›¸å°æ‡‰çš„ element é›†åˆï¼Œé›†åˆç‚º HTMLCollection ã€‚

document.getElementsByClassName('className')
æ‰¾å°‹ DOM ä¸­ç¬¦åˆæ­¤ class åç¨±çš„æ‰€æœ‰å…ƒç´ ï¼Œä¸¦å›å‚³ç›¸å°æ‡‰çš„ element é›†åˆï¼Œé›†åˆç‚º HTMLCollection ã€‚

document.querySelector('selector')
åˆ©ç”¨ selector ä¾†æ‰¾å°‹ DOM ä¸­çš„å…ƒç´ ï¼Œä¸¦å›å‚³ç›¸å°æ‡‰çš„ç¬¬ä¸€å€‹ element ã€‚

document.querySelectorAll('selector')
åˆ©ç”¨ selector ä¾†æ‰¾å°‹ DOM ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œä¸¦å›å‚³ç›¸å°æ‡‰çš„ç¬¬ä¸€å€‹ element ï¼Œé›†åˆç‚º NodeList ã€‚


é€™è£¡ç¨å¾®æä¸€ä¸‹ HTMLCollection ä»¥åŠ NodeList ï¼Œå…©å€‹éƒ½æ˜¯ Collection of DOM Nodes ï¼Œé‚£åˆ°åº•å·®åœ¨å“ªå‘¢ï¼Ÿ

HTMLCollection
é›†åˆå…§å…ƒç´ ç‚º HTML element ï¼Œä¹Ÿå› æ­¤ Node type åªèƒ½æ¥å— Element ã€‚

NodeList
é›†åˆå…§å…ƒç´ ç‚º Node ï¼Œä¹Ÿå› æ­¤å…¨éƒ¨çš„ Node éƒ½å¯ä»¥å­˜æ”¾åœ¨ NodeLists å…§ã€‚


å…¶å¯¦çœŸæ­£å¸¸ç”¨çš„ DOM API ä¹Ÿå°±é€™å¹¾ç¨®è€Œå·²ï¼Œå°¤å…¶ jQuery ç››è¡Œï¼Œè®“ HTML èˆ‡ JavaScript çš„æºé€šæ›´åŠ ç²¾ç°¡å®¹æ˜“ï¼Œä¹Ÿå› æ­¤è¶Šä¾†è¶Šå¤šäººæ¨æ£„ DOM API é€²è€ŒæŠ•å‘ jQuery çš„æ‡·æŠ±ï¼Œç­†è€…åœ¨æœªä¾†çš„æ–‡ç« ä¹ŸæœƒåŠ ä»¥é—¡è¿°é€™å€‹ JavaScript Library ã€‚
___________________________________________________________________________________________________________________________________________________________________________________________________________________
ï¼ˆCSSï¼‰
HTML çš„å±¬æ€§åœ¨ CSS å«åšæ€§è³ª
å¤§éƒ¨åˆ†æ”¾åœ¨ head æ¨™ç±¤


è¡Œå…§		æ®µè½		å¼•ç”¨è¨­å®š
style å±¬æ€§		å€åŸŸæ€§çš„è¨­å®š	å¼•å…¥ .css æª”


å­—å‹ã€æ®µè½ã€é¡è‰²
font      text     color

å…ƒä»¶åç¨±ã€class åç¨±ã€id åç¨±
div {
}

.colorRed {
}

#one {
}

background-color: 
background: é€™å€‹æ€§è³ªæ˜¯ç‰¹æ€§ç°¡å¯«ï¼Œå¯ä»¥é›†åˆè¨­å®š
color: 

marginã€paddingã€border-width

å·¦ä¸Šåº§æ¨™(0, 0)




å­—å‹å¤§å°ï¼š
å¦‚ font-size å±¬æ€§
åº¦é‡å–®ä½ï¼š
çµ•å°: xx-smallã€x-smallã€smallã€mediumã€largeã€x-largeã€xx-large
ç›¸å°: largerã€smaller
çµ•å°: point(pt)ã€pixel(px)ã€cm(å…¬åˆ†)ã€in(è‹±å‹)ã€mm(å…¬å˜)
ç›¸å°: em(é è¨­ 16)ã€rem(æ ¹æ“š html å…ƒä»¶ï¼Œé è¨­ 16)ã€%

å­—é«”ç²—ç´°ï¼š
font-weight å±¬æ€§
normal
bold
bolder
lighter
100-900

å­—å‹ï¼š
font-family å±¬æ€§ï¼Œå¯åŒæ™‚è¨­å®šå¤šçµ„(ç•¶ç€è¦½å™¨ä¸æ”¯æ´ç¬¬ä¸€ç¨®å°±é¡¯ç¤ºç¬¬äºŒç¨®)




position: 
	static	é è¨­å®šä½ï¼Œæœƒç…§è‘—ç€è¦½å™¨é è¨­çš„é…ç½®è‡ªå‹•æ’ç‰ˆï¼Œç„¡æ³•å®šç¾© topã€leftã€bottom èˆ‡ right çš„æ•¸å€¼ã€‚
	absolute	çµ•å°å®šä½(è„«é›¢å¸¸è¦ï¼Œå½±éŸ¿ä¸‹ä¸€å€‹å…ƒä»¶ä½ç½®)å’Œ Fixed å±¬æ€§ç›¸ä¼¼ï¼Œä¸ä¸€æ¨£åœ¨æ–¼ä»–çš„åŸºæº–é»æœƒä»¥å±¬æ€§æ˜¯ Relative çš„çˆ¶å±¤ç‚ºåŸºæº–ï¼Œæ‰€ä»¥å¦‚æœæ²’æœ‰ Relative çˆ¶å±¤çš„æƒ…æ³ä¸‹ï¼Œä»–æœƒç›´æ¥æ‰¾åˆ° bodyï¼ˆé»ƒæ¡†ï¼‰ä¸¦ä»¥ä»–ç‚ºåŸºæº–é»ã€‚
	relative	ç›¸å°å®šä½(å¸¸è¦)ï¼Œåœ¨æ²’æœ‰è¨­å®šä»»ä½•å±¬æ€§çš„æƒ…æ³ä¸‹ï¼Œæœƒå’Œ Static çš„å‘ˆç¾æ–¹å¼ä¸€æ¨£ã€‚å’Œ Static ä¸åŒæ–¼ï¼Œå¯é€é topã€leftã€bottom èˆ‡ right æ”¹è®Šä»–çš„ä½ç½®ï¼Œä½†ç„¡è«–å®ƒåœ¨é é¢ä¸Šç§»å‹•äº†å¤šå°‘ä½ç½®ï¼Œéƒ½ä¸å½±éŸ¿å…¶ä»–å…ƒç´ çš„ä½ç½®ã€‚
	fixed	å¯è¦–å€(viewport)çµ•å°å®šä½(è„«é›¢å¸¸è¦)ï¼Œå…ƒç´ æœƒä»¥ç€è¦½å™¨è¦–çª—ï¼ˆå¯è¦–ç¯„åœï¼‰ä¾†å®šä½ï¼Œæ„å‘³å³ä¾¿é é¢æ»¾å‹•ï¼Œä»–é‚„æ˜¯æœƒå›ºå®šåœ¨ç›¸åŒä½ç½®ã€‚ç‰¹åˆ¥çš„çš„åœ°æ–¹æ˜¯ä¸æœƒåƒ Relative ä¸€æ¨£æœƒåœ¨åŸåœ–å±¤ç•™ä¸‹ä»–çš„ç©ºé–“ï¼Œè‹¥å¾Œé¢é‚„æœ‰ Relative å±¬æ€§çš„å…ƒç´ ï¼Œå‰‡æœƒé»åœ¨å‰é¢åŒæ˜¯ Relative æˆ–æ˜¯ Static å±¬æ€§çš„å…ƒç´ ä¸‹æ–¹ã€‚
	sticky	æ»¾å‹•é»æ»¯å®šä½(çµåˆ relativeã€fixedï¼Œæ²’æœ‰è·¨è¶Šç‰¹å®šç¯„åœæ™‚ç‚º relativeï¼Œè¶…å‡º(scroll-bar)å‰‡ fixed)ï¼Œå…ƒç´ ä¸€å®šè¦åœ¨ topã€leftã€bottom æˆ– right ä¸­æŒ‡å®šä¸€å€‹å±¬æ€§ï¼Œé»æ€§å®šä½æ‰æœƒç”Ÿæ•ˆï¼å¦å‰‡è¡Œç‚ºå°±å’Œ Relative å±¬æ€§ä¸€æ¨£ã€‚



z-index: 1(å°±å¯ä»¥åœ¨å‰æ™¯çš„ä¸Šé¢)

___________________________________________________________________________________________________________________________________________________________________________________________________________________
ï¼ˆJavaScriptï¼‰
ExtJS æ˜¯åŸºæ–¼ JavaScript/Ajax çš„å‰ç«¯æ¡†æ¶ï¼›
Ajaxï¼ˆAsynchroious JavaScript and Xmlï¼‰æ˜¯åŸºæ–¼ JavaScript çš„æŠ€æœ¯ã€‚åˆ©ç”¨ xml æ•¸æ“šæ ¼å¼é€šä¿¡ï¼ˆtxtã€jsonäº¦å¯ï¼‰ï¼Œå…·æœ‰èˆ‡ä¼ºæœå™¨ç«¯ç•°æ­¥é€šä¿¡ç‰¹é»çš„æŠ€è¡“ï¼Œæ˜¯é›†ä¸­æŠ€è¡“çš„èåˆ

æ‰€æœ‰ JavaScript ä¸­çš„å‡½å¼éƒ½æœ‰ä¸€å€‹å…§å»ºçš„ prototype å±¬æ€§ï¼ŒæŒ‡å‘ä¸€å€‹ç‰¹æ®Šçš„ prototype ç‰©ä»¶ï¼Œprototype ç‰©ä»¶ä¸­ä¹Ÿæœ‰ä¸€å€‹ constructor å±¬æ€§ï¼ŒæŒ‡å‘åŸä¾†çš„å‡½å¼ã€‚
åŸå‹(prototype): number, string, boolean, undefined, è€Œ null ä¹Ÿæ˜¯ä¸€ç§ç‰¹æ®Šçš„åŸå§‹å€¼ã€‚
å¤ªå¸¸ä½¿ç”¨æ‰€ä»¥æä¾›åŸå‹ç‰©ä»¶: Numberã€String

varã€let(è¼ƒåš´è¬¹)
ä¸å¸¶ varã€let å®£å‘Šè®Šé‡è¡¨ç¤ºä½¿ç”¨å…¨åŸŸ(global)

nullã€undefinedã€0ã€NaN


å­—ä¸² + æ•¸å­— ç‚º å­—ä¸² (å°å¿ƒé€ æˆ bug ç”¢å“åƒ¹æ ¼å‡ºç¾æ¥µç«¯)
1 + 2	// 3
"1" + "2"	// "12"
1 + "2"	// "12"
"1" + 2	// "12"


ä¸‰ç¨®å›èª¿å‡½æ•¸æ–¹å¼ï¼š
callbackã€promiseã€async/await


event loop(äº‹ä»¶å¾ªç’°)
å¾ stack ä¸Ÿåˆ° ç€è¦½å™¨(Web API) åŸ·è¡Œï¼Œç€è¦½å™¨(Web API) è¿”å›åˆ° queueï¼Œqueue å†çµ¦ stackï¼Œè®“ single thread é”åˆ° å½ç•°æ­¥

stack	â†’	browser
		â†“
	â†–	queue



eventã€event handler

___________________________________________________________________________________________________________________________________________________________________________________________________________________
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Ajax æ¨™ç±¤é¸å–®</title>
<script type = "text/javascript">
function getData(pageName) {
	//Ajax: XMLHttpRequest ç‰©ä»¶å°ˆé–€ç”¨ä¾†å’Œä¼ºæœå™¨åšé€£ç·š
	var req = new XMLHttpRequest();
	req.open("get","http://localhost8080"+pageName);
	req.onload=function() {	//loadäº‹ä»¶ï¼Œåµæ¸¬é€£ç·šçš„ç‹€æ…‹çµæŸ
		//é€£ç·šå®Œæˆï¼Œåšé€£ç·šå¾Œçš„è™•ç†
		var content=document.getElementById("content");
		content.innerHTML=this.responseText;
	}
	req.send();		//é€å‡ºé€£ç·š
</script>
</head>
<body onload="getData('popular.htm');">
	<div>
		<span onclick="getData('popular.htm');">xxx</span>
		<span onclick="getData('latest.htm');">xxx</span>
	</div>
	<hr/>
	<div id = "content"></div>
</body>
</html>
é™£åˆ—[0][1]
var colors=[];
colors[0] = 'black';
colors.push('Purple');		//å¢åŠ ï¼Œä¸ç”¨äº‹å…ˆæŠŠé™£åˆ—å¤§å°è¨­å®šï¼Œåº•å±¤åŸ·è¡Œé è¨­å‰µå»ºèˆ‡æ“´å……
console.log(colors.length);	//ç”¨functionç•¶ä½œåƒæ•¸ç·¨è­¯æ…¢

ç‰©ä»¶xx.yy
var home2 = {
	father: 'bob',
	goDinner: function(num) {
		console.log(num+ 'people');
	}
};
console.log(home2.father);
home2.goDinner(3);

JSONæ ¼å¼
[
	{
		"id": "333",
		"name": [
			{"1": 'ss'},
			{"2": 'xx'}
		]
	}
]

javascript
$(function() {
	var home = {
		"father": 'tom',
		"mother: 'mary',
		'baby': [
			{'son': 'jack'},
			{'son': 'susan'},
			{'son': 'nico'}
		]
	};

	console.log(home.baby.length);
	for (var i in home.baby) {
		$('ul').append('<li>'+home.baby[i].son+'</li>');	//HTMLè£¡çš„<body>å…§<ul>æˆ‘æƒ³ç”¨javascriptå‘ˆç¾å‡ºä¾†ï¼Œä½¿ç”¨jQueryæŒ‡å®šul
	}
});

//for inå¯ç®—å‡ºè£¡é¢çš„é™£åˆ—æ•¸é‡é–‹å§‹è·‘è¿´åœˆï¼Œå‡ä½¿ç”¨Angularã€Reactä»–æœ‰templeteæ§åˆ¶ï¼Œä¸ç”¨forè¿´åœˆå¯ä»¥ç”¨repeatã€‚
//$('classåç¨±')
//append()æ˜¯jquery apiï¼Œæ„æ€å‰‡æ˜¯æœƒåœ¨æŒ‡å®šå…ƒç´ å¾Œé¢åŠ ä¸Šå…§å®¹

//ä¸‹åˆ—ç¨‹å¼ç¢¼ç‚ºjQueryæ’ˆé ç«¯ajaxçš„èªæ³•
//ä¸å¸Œæœ›ç¶²é é‡æ–°æ•´ç†ï¼Œæƒ³è¦å±€éƒ¨ä¿®æ”¹å…§å®¹æˆ–åœ¨é ç«¯æ’ˆè³‡æ–™
$.ajax({
	type:'GET',
	url:'è¦æ’ˆçš„JSONç¶²å€',
	success:function(data) {
		xxx
	}
});

$(function() {
	$.ajax({
		type:'GET',
		url:'http://localhost:8080
		success:function(data) {
		//æˆåŠŸè³‡æ–™å‚³åˆ°dataè®Šæ•¸

		//åˆ¤æ–·æ’ˆåˆ°çš„å€¼æ˜¯ç”šéº¼æ ¼å¼
			console.log(typeof(data));
		//å°‡æ’ˆä¾†çš„è³‡æ–™è½‰ç‚º JSON æ ¼å¼
			var thisdata = JSON.parse(data);
		//å°‡å…§å®¹é¡¯ç¤ºåœ¨ç¶²é ä¸Š
			$('body').html(thisdata[0].org_Text);
		}
	});
});

$(function() {
	$.ajax({
		type:'GET',
		url:'http://localhost:8080',
		success:function(data) {
			for(i=0; data.length>i; i++) {
				var thisData = JSON.parse(data);
				var str;
				var free = thisData[i].Ticketinfo;
				if(free=='å…è²»åƒè§€') {
					str = '<li>'+thisData[i].Name+'</li>';
					$('body').append(str);
				}
			}
		}
	});
});

<script>
	jQuery(document).ready(function($) {
		$('#send').on('click', function(event
			){
			event.preventDefault();
			var str = $('#password').val();
			console.log(str);
			$.post('/postAjax',{password:
				str}).success(function(data){
				console.log(data);
				if(data=='success'){
				alert('å¯†ç¢¼è¼¸å…¥æˆåŠŸ')
				}else{
					alert('å¯†ç¢¼è¼¸å…¥éŒ¯èª¤')
				}
			});
		});
		$('#getData').on('click',function(
			event) {
			event.preventDefault();
			$.get('/getAjax').success(function(
				data) {
				// console.log(data)
				$('#list').children().remove()
				for(i=0; data.length>i; i++) {
					$('#list').append('<li>å§“å: '+
						data[i].name+' é›»è©±: '+data[i]
						.tel);
				}
			});
		});

å‚³çµ±æ–¹å¼æ²’æœ‰ç”¨jquery ajaxçš„è©±ï¼Œä¾‹å¦‚POSTå¾Œå›å‚³çš„å°±ä¸æ˜¯idè€Œæ˜¯nameå–å¾—

//å‚³çµ±è¼¸å…¥
exports.post = function(req, res) {
	console.log(req);
	if(req.body.password == 1234) {
		res.render('pages/success');
	}else{
		res.render('pages/error')
	};
};

exports.postAjax = function(req, res) {
	//ajax
	if(req.body.password == 1234) {
		res.send('success');
	} else{
		res.send('error')
	};
};

//getå–å¾—è³‡æ–™
exports.getAjax = function(req, res) {
	res.send([{
		name: 'ç‹å°å',
		tel:'0922194720'
	}, {
		name:'æå°èŠ±',
		tel:'0983026183'
	}]);
};
___________________________________________________________________________________________________________________________________________________________________________________________________________________
<!-- HTML input -->

<div>
	<p>
		æ¨™é¡Œï¼š<input id="post_example_name" name="product[name]"
			placeholde="è«‹è¼¸å…¥æ¨™é¡Œ"
			type="text" value="æ–°æ¨™é¡Œ" />
	</p>
	<p>
		åƒ¹éŒ¢ï¼š<input id="post_example_price" min="0"
			name="product[price]"
			placeholder="è«‹è¼¸å…¥åƒ¹éŒ¢"
			type="number" value="100" />
	</p>
	<p>
		æ•˜è¿°ï¼š<textarea id="post_example_description"
			name="product[description]"></textarea>
	</p>
</div>
<! -- HTML card-->
<div class="_card">
	<div class="card-container">
		<div class="card-content">
			<h3 id="post_card_name">&nbsp;</h3>
			<h4 id="post_card_price" style="color:red;">&nbsp;</h4>
			<p id="post_card_description">&nbsp;</p>
		</div>
	</div>
</div>
<!-- javaScript -->
<script>

function initDynamicCard() {
	var cardNameElement =document.querySelector("#post_card_name");
	var cardPriceElement = document.querySelector("#post_card_price");
	var cardDescriptionElement = document.querySelector("#post_card_description");
	var exampleNameInput = document.querySelector("#post_example_name");
	var examplePriceInput = document.querySelector("#post_example_price");
	var exampleDescriptionInput = document.querySelector("#post_example_description");

	exampleNameInput.addEventListener('input', posts_36_card_update);
	examplePriceInput.addEventListener('input', posts_36_card_update); 
	exampleDescriptionInput.addEventListener('input', posts_36_card_update); 
 
	function posts_36_card_update(){ 
		var name = exampleNameInput.value; 
		var price = examplePriceInput.value; 
		var description = exampleDescriptionInput.value; 
		cardNameElement.innerHTML = name; 
		cardPriceElement.innerHTML = price; 
		cardDescriptionElement.innerHTML = description; 
	} 

	posts_36_card_update(); 
} 

initDynamicCard();
</script>
<! -- css -->

<style>
._card {
	width: 300px;
	height: 230px;
	position: relative;
	overflow: hidden;
	float: left;
}

._card > .card-container {
	position: absolute;
	background-color: rgba(0, 0, 0, 0.3);
	color: white;
	text-align: left;
	margin: auto;
	bottom: 0;
	height: 100%;
	width: 100%;
}

._card > .card-container > .card-content {
	padding: 16px;
}

._card > .card-container > .card-content > .price {
	color: red;
}
</style>
___________________________________________________________________________________________________________________________________________________________________________________________________________________
Use JavaScript's jQuery Ajax

Getçš„ä½¿ç”¨ï¼Œå°‡å°è±¡æ•¸çµ„æ¸²æŸ“æˆé é¢çš„DOMçµæ§‹
æ¸¬è©¦æ¥å£èƒ½ä¸èƒ½æ­£å¸¸è¨ªå•åˆ°æ•¸æ“š

	let newsData = {};
	$.get("http://127.0.0.1:3008/api/getnewslist", function(data,status) {
		console.log(data);
	});

ç·¨å¯«ç°¡å–®çš„DOMçµæ§‹å’ŒCSSæ¨£å¼ï¼Œä¸¦ä¸”å¯«å‡ºä¸€å€‹itemå…ƒç´ æ–¹ä¾¿èª¿è©¦æ¨£å¼
ä½¿ç”¨jQueryç²å–æ•¸æ“šï¼Œä¸¦çµ¦newsDataè®Šæ•¸
ç·¨å¯«æ¸²æŸ“æ–¹æ³•ï¼ŒjQueryçš„$.each()å°æ‹¿åˆ°çš„æ•¸æ“šé€²è¡Œå¾ªç’°éæ­·ï¼Œä½¿ç”¨prepend()é€²è¡Œå‘é é¢æ·»åŠ å…ƒç´ çš„æ“ä½œ
prepend()çš„åƒæ•¸ç›´æ¥æ·»åŠ å‰›å‰›å¯«å¥½çš„itemå…ƒç´ çš„DOMçµæ§‹ï¼Œä¸¦å°‡å…¶ä¸­éœ€è¦è®ŠåŒ–çš„å¹¾å€‹å…ƒç´ ä½¿ç”¨è®Šæ•¸ä»£æ›¿ï¼Œç›´æ¥ä½¿ç”¨éæ­·å‡ºæ¯å€‹å°è±¡çš„å±¬æ€§é€²è¡Œæ›¿æ›
åŸ·è¡ŒåŠ è¼‰æ–¹æ³•load()ï¼Œæ¸…ç©º.contentè£¡çš„DOMå…ƒç´ 
html
//...

main.js
$(function() {
	let newsData = {};
	// æ¥å£
	$.get("http://127.0.0.1:3008/api/getnewslist", function(data, status) {
		// console.log(data);
		newsData = data.message;
		load();
	});

	const load = () => {
		$.each(newsData, function(i, n ) {
			$(".content").prepend("<div class = 'item'><p class="title">"+ n.title
			+"</p><p class="cont"><span class="addtime">ç™¼å¸ƒæ™‚é–“:"+n.addtime+"</span><span class = "click">é»æ“Šé‡:"+n.click
			+"</span></p></div>")
		})
	}
})
___________________________________________________________________________________________________________________________________________________________________________________________________________________
Socket.io: node.jsè§£æ±ºæ–¹æ¡ˆï¼Œè®“APPå»ºç«‹å³æ™‚é€šè¨Šçš„JavaScriptå‡½å¼åº«	å°è£äº†PollingåŠWebSocketï¼Œä½¿ç”¨çš„é€šè¨Šå”å®šåŸºç¤: WebSocketã€‚é€éåœ¨Serverèˆ‡Clientä¹‹é–“å»ºç«‹æŒçºŒçš„é€£ç·šï¼Œå¯ä»¥å³æ™‚çš„å‚³é€è³‡æ–™çµ¦å°æ–¹ã€‚
	æ˜¯ä¸€å€‹event-basedå…¨é›™å·¥çš„é€šè¨Šå‡½å¼åº«ï¼Œäº‹ä»¶é©…å‹•é€™å€‹éƒ¨åˆ†æ˜¯æœ€å®¹æ˜“å‡ºåŒ…çš„åœ°æ–¹ï¼Œç•¶æˆ‘å€‘åœ¨å’Œreactå°ˆæ¡ˆæ•´åˆåœ¨ä¸€èµ·çš„æ™‚å€™ï¼Œå°±éœ€è¦å»æ³¨æ„äº‹ä»¶æ˜¯ä¸æ˜¯æœ‰å’Œç•«é¢çš„æ¸²æŸ“ç¶åœ¨ä¸€èµ·ï¼Œæ„æ€å°±æ˜¯èªªä¸å¯ä»¥æ¯æ¸²æŸ“ä¸€æ¬¡ï¼Œæˆ‘å°±é‡æ–°å»º		ç«‹é€£çµã€é‡æ–°ç›£è½äº‹ä»¶ã€é‡æ–°ç™¼å‡ºè¨Šæ¯ï¼Œé€™æ¨£ä¸€ä¾†è¨˜æ†¶é«”å¾ˆå¿«å°±æœƒç”¨å®Œï¼Œè™•ç†å™¨ä¹Ÿæ ¹æœ¬ä¾†ä¸åŠè™•ç†ã€‚
___________________________________________________________________________________________________________________________________________________________________________________________________________________
éåŒæ­¥æ’ˆå–è³‡æ–™ï¼Œä½¿ç”¨onloadå»å–å¾—(GETï¼Ÿ)	// XMLHttpRequestè£¡æœ‰open()ã€send()ã€onload()ã€responseText()
const xhr = new XMLHttpRequest();
const url = 'https://data.kcg.gov.tw/dataset/a98753a3-3446-4c9a-abfc-58dc49f2158c/resource/48d4dfc4-a4b2-44a5-bdec-70f9558cd25d/download/yopendata1070622opendatajson-1070622.json'
xhr.open('get', url, true)
xhr.send(null)

xhr.onload = function() {			// onload â†’ ç¢ºå®šæœ‰è³‡æ–™å›å‚³å›ä¾†æ™‚åŸ·è¡Œå¾Œé¢ function()
	console.log(xhr.responseTest)
}

æ“ä½œè³‡æ–™ã€‚JSON ä¸€æ¨£ä½¿ç”¨ä¸Šé¢ã€€é«˜é›„å……é›»ç«™ OPEN DATA
// å‡å¦‚æˆ‘å€‘HTMLä¸Šæœ‰<div class ="text></div>

let text = document.querySelector('.text');		// æ“ä½œHTMLçš„é‡è¦æ­¥é©Ÿï¼Œdocument.querySelector('.text')
const xhr = new XMLHttpRequest();
const url = 'https://data.kcg.gov.tw/dataset/a98754a3-3446-4c9a-abfc-58dc49f2158c/resource/48d4dfc4-a4b2-44a5-bdec-70f9558cd25d/download/yopendata1070622opendatajson-1070622.json'
xhr.open('get', url, true)
xhr.send(null)

xhr.onload = function() {
	let str = JSON.parse(xhr.responseText)		// JSON.parse()ç”¨ä¾†å°‡responseçš„JSONå­—ä¸²(xhr.responseText)è½‰æ›æˆç‰©ä»¶ã€‚
	text.textContent = str[0].Address;		// æ“ä½œHTMLçš„<div class = "text">æ¨™ç±¤å…§å®¹ï¼Œä½¿ç”¨text.textContent = str[0].Addressï¼ŒæŠŠè³‡æ–™å°åˆ°HTMLä¸Šã€‚
}

é‡æ–°æ•´ç†æ­¤æµç¨‹ï¼š
1. è¨­ç«‹ç‰©ä»¶textå‹æ…‹ä½œç”¨æ˜¯HTMLçš„ä½¿ç”¨æ¬Š
2. å»ºç«‹ä¸€å€‹XMLHttpRequestä¸¦open()ã€send()ã€onload()

æä¸å¥½æ’ˆçš„ç¶²å€æœ‰éŒ¯èª¤(status404ç­‰)ï¼Œæ‰€ä»¥æˆ‘å€‘æ²¿ç”¨ä¸Šé¢æ”¹å¯«
xhr.onload = function() {
	if(xhr.status == 200) {
		let str = JSON.parse(xhr.responseText)
		text.textContent = str[0].Address;
	}else {
		console.log('è³‡æ–™éŒ¯èª¤')
	}
}
___________________________________________________________________________________________________________________________________________________________________________________________________________________
Angular
HttpClient is Angular's mechanism for communicating with a remote server over HTTP.
HttpClientæ’ˆå–é ç«¯è³‡æ–™
å°ˆæ¡ˆä¸­å¯ä»¥æŠŠgetå¾Œç«¯APIçš„functionæ”¾åœ¨serviceï¼Œé€™æ¨£æ¯éš»ç¨‹å¼éƒ½å¯ä»¥å¾é€™é‚Šæ‹¿è³‡æ–™ã€‚

programs.service.ts
import { HttpClient } from '@angular/common/http';
public getData()
	: Observable<any> {
	const URL = 'http://data.ntpc.gov.tw/api/v1/rest/datastore/382000000A-000352-001';
	return this.http.get<any>(URL);
	}
é€™é‚Šç”¨çš„æ˜¯æ”¿åºœè³‡æ–™å¹³å°è£¡é¢çš„é–‹æ”¾è³‡æ–™ï¼Œæˆ‘å€‘å¯ä»¥å…ˆç”¨postmanä¾†è§€å¯Ÿè³‡æ–™çš„å‹æ…‹ï¼Œå¯ä»¥è§€å¯Ÿåˆ°é€™åŒ…è³‡æ–™åœ¨result=>recordså¾Œè£¡é¢æ˜¯ç”¨é™£åˆ—å­˜å–çš„å¤šç­†YouBikeç³»çµ±ä½ç½®
å†ä¾†å°±å¯ä»¥åˆ°æˆ‘å€‘çš„componentä¸­å»å‘¼å«
tri001.component.ts
import { Component, OnInit} from '@angular/core';
import { ProgramsService} from '../programs.service';
import { HttpErrorResponse} from '@angular/common/http';

@Component( {
	selector: 'app-tri001',
	templateUrl: './tri001.component.html'
})
export class Tri001Component implements OnInit {
	public item: Array<any> = new Array<any>();	// å› ç‚ºæœƒæœ‰å¤šç­†ï¼Œå…ˆå»ºä¸€å€‹anyå‹åˆ¥çš„é™£åˆ—è³‡æ–™ä¾†æ¥å›å‚³å€¼
	constructor(private programService: ProgramsService) {}
	ngOnInit() {
		this.getData();	// ç¨‹å¼ä¸€å•Ÿå‹•æ™‚å³æ’ˆå–è³‡æ–™
	}
	getData() {
		this.programService.getYouBikeData().subscribe(
			(response: any) => {
				this.item = response;
				console.log(this.item);	// logæ¥åˆ°çš„è³‡æ–™
			},
			(error: HttpErrorResponse) => this.programService.HandleError(error)
		);
	}
}
getData()åŸ·è¡Œå®Œ(subscribe)ï¼Œæœƒæœ‰å…©ç¨®çµæœ
1. å°±æ˜¯å¾—åˆ°è³‡æ–™=>å°‡responseçµ¦æˆ‘å€‘å®šç¾©çš„itemåƒæ•¸
2. å¾—ä¸åˆ°è³‡æ–™æˆ–ç”¢ç”Ÿè«åéŒ¯èª¤=>åˆ©ç”¨HttpErrorResponseï¼Œå°‡è³‡æ–™å‚³åˆ°å…±ç”¨HandleError()è£¡è®“éŒ¯èª¤å‘ˆç¾åœ¨ç¶²é ä¸Š

programs.sevice.ts
// htttpå‘¼å«éŒ¯èª¤è™•ç†
public HandleError(e: any): void {
	// console.log(e);
	alert(e.error.error);
}
æ’°å¯«å¥½ä»¥å¾Œä¾†çœ‹çœ‹æœƒlogçš„è³‡æ–™

é€™é‚Šæœƒæœ‰No 'Access-Control-Allow-Origin' header is present on the requested resource.çš„CROSå•é¡Œ
https://blog.gtwang.org/web-development/chrome-configuration-for-access-control-allow-origin/
å…ˆåƒè€ƒé€™ç¯‡æ–‡ä¾†è§£æ±º

ä¹‹å¾Œalertå¯ä»¥ç”¨Angular Materialçš„Dialogæ”¹å¯«
æ¥åˆ°è³‡æ–™ä»¥å¾Œï¼Œæˆ‘å€‘æ‡‰è©²ä¸æœƒåªæƒ³å–®ç´”çš„åœ¨logä¸­é¡¯ç¤ºå§
æ¥ä¸‹ä¾†è¦åœ¨ç¶²é ç•«é¢ä¸Šå‘ˆç¾
æ ¹æ“šå‰é¢è§€å¯Ÿåˆ°çš„å›å‚³JSONå‹æ…‹
tri001.component.ts
getData() {
	this.programService.getYouBikeData().subscribe((response: any) => {
		this.item = response.result.records;	// å°‡å¤šç­†YouBikeç³»çµ±ä½ç½®ç›´æ¥çµ¦æˆ‘å€‘item
}
æ¥ä¸‹ä¾†æˆ‘å€‘åœ¨htmlä¸­ä½¿ç”¨Angularä¸­çš„ngForï¼Œå³å¯å°‡å¤šç­†è³‡æ–™é¡¯ç¤ºåœ¨å‰ç«¯ã€‚èˆ‰ä¾‹åˆ—å‡ºè»Šç«™çš„åç¨±ï¼š
tri001.component.html
<div *ngFor = "let i of item">
{{i.sna}}
</div>
___________________________________________________________________________________________________________________________________________________________________________________________________________________
Socket.IO æ˜¯ä¸€å€‹é¢å‘å³æ™‚ web æ‡‰ç”¨çš„ JavaScript åº«
å®ƒä½¿å¾—ä¼ºæœå™¨å’Œå®¢æˆ¶ç«¯ä¹‹é–“å³æ™‚é›™å‘çš„é€šä¿¡æˆç‚ºå¯èƒ½ã€‚ä»–æœ‰å…©å€‹éƒ¨åˆ†ï¼šåœ¨ç€è¦½å™¨ä¸­åŸ·è¡Œçš„å®¢æˆ¶ç«¯åº«ï¼Œå’Œä¸€å€‹é¢å‘Node.jsçš„ä¼ºæœå™¨ç«¯åº«ã€‚å…©è€…æœ‰è‘—å¹¾ä¹ä¸€æ¨£çš„APIã€‚åƒNode.jsä¸€æ¨£ï¼Œå®ƒä¹Ÿæ˜¯äº‹ä»¶é©…å‹•çš„
socket.io é€šè¨Šå”å®šåŸºç¤ websocket
server on		client emit

Socket.ioæ˜¯ä¸€ä¸ªWebSocketåº“ï¼ŒåŒ…æ‹¬äº†å®¢æˆ·ç«¯çš„jså’ŒæœåŠ¡å™¨ç«¯çš„nodejsï¼Œå®ƒçš„ç›®æ ‡æ˜¯æ„å»ºå¯ä»¥åœ¨ä¸åŒæµè§ˆå™¨å’Œç§»åŠ¨è®¾å¤‡ä¸Šä½¿ç”¨çš„å®æ—¶åº”ç”¨ã€‚ å®ƒä¼šè‡ªåŠ¨æ ¹æ®æµè§ˆå™¨ä»WebSocketã€ AJAX é•¿è½®è¯¢ã€Iframeæµç­‰ç­‰å„ç§æ–¹å¼ä¸­é€‰æ‹©æœ€ä½³çš„æ–¹å¼æ¥å®ç°ç½‘ç»œå®æ—¶åº”ç”¨
___________________________________________________________________________________________________________________________________________________________________________________________________________________
åˆå§‹åŒ–Canvasä»¥åŠç›¸é—œè®Šæ•¸ï¼š
// Init canvas
const canvas = document.getElementById("my-canvas")
const ctx = canvas.getContext("2d")

const canvas_size = 500
convas.width = canvas_size
convas.height = canvas_size

let time = 0

function draw() {
	time++

	// Clear the canvas(æ¯æ¬¡æ›´æ–°å½±æ ¼)
	ctx.clearRect(0, 0, canvas_size, canvas_size)

	// ...
}

// update the canvas every 1000 / 30 per second
setInterval(draw, 1000 / 30)

// Mousemove Event
const mouse = {x: 0, y: 0}
canvas.addEventListener("mousemove", function(e) {
	mouse.x = e.offsetX
	mouse.y = e.offsetY
})

ç¹ªè£½é›»è»Šï¼š
// Train
let carX = time % 550 * 2 - 50
ctx.lineWidth = 1
ctx.fillStyle = "skyblue"
ctx.beginPath()
	ctx.fillRect(carX, 265, 50, 30)
	ctx.strokeRect(carX, 265, 50, 30)
	ctx.arc(carX + 10, 295, 5, 0, Math.PI)
	ctx.arc(carX + 40, 295, 5, 0, Math.PI)
ctx.fillStyle = "black";
ctx.fill();
ctx.stroke();

ç¹ªè£½æ——å¹Ÿï¼š
// Flag
ctx.beginPath()
	ctx.moveTo(225, 200)
	// change the position of flag when mouse moving
	ctx.lineTo(225, 50 + mouse.y / 5)
	ctx.lineTo(250, 60 + mouse.y / 5 - time % 5)
	ctx.lineTo(225, 70 + mouse.y / 5)
ctx.closePath()
// change the color of flag when mouse moving
ctx.fillStyle = `hsl(${mouse.x % 360}, 50%, 50%`
ctx.fill()
ctx.stroke()
Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™Ë™
node --experimental-modules my app.mjs

ä½¿ç”¨NVMå®‰è£NPM
ä½¿ç”¨NVMç®¡ç†ä¸åŒç‰ˆæœ¬çš„nodeèˆ‡npm
NPM=Node Package Manager

install
å®‰è£node.jsè‡ªå¸¶npm
nvm use 8.9.4
node -v
npm -v
æƒ³ä¸‹è¼‰json-server
$ npm install -g json-server	// -gæ¯å€‹å°ˆæ¡ˆéƒ½èƒ½ç”¨çš„

æ¯ä¸€å€‹å°ˆæ¡ˆå‰ç«¯éƒ½èƒ½ç”¨json serverå»é–‹æƒ³è¦çš„jsonæª”ï¼Œç•¶dbç•¶apiåŠŸèƒ½æ¸¬è©¦
""ä¸èƒ½ç”¨''
{}ç‰©ä»¶
[] é™£åˆ—
Example
Create a db.json file
{
	"posts": [
		{ "id": 1, "title": "json-server", "author": "typicode" }
	],
	"comments": [
		{ "id": 1, "body": "some comment", "postId": 1 }
	],
	"profile": { "name": "typicode" }
}
Start JSON Server
$ json-server --watch db.json	// json-server --watch ./data/data.json	./æ˜¯ç¾åœ¨çš„ä½ç½®

Now if you go to http://localhost:3000/posts/1, you'll get
{ "id": 1, "title": "json-server", "author": "typicode" }
Also when doing requests, it's good to know that:
If you make POST, PUT, PATCH or DELETE requests, changes will be automatically and safety saved to db.json using lowdb.
___________________________________________________________________________________________________________________________________________________________________________________________________________________
ä½¿ç”¨require("fs")è¼‰å…¥fsæ¨¡å¡Šï¼Œæ¨¡å¡Šä¸­æ‰€æœ‰æ–¹æ³•éƒ½æœ‰åŒæ­¥å’Œç•°æ­¥å…©ç¨®ã€‚
ç•°æ­¥ï¼šæœ‰ä¸€å€‹å›èª¿å‡½æ•¸
var fs = require("fs");		// è¼‰å…¥fsæ¨¡å¡Š

fs.unlink('/tmp/shiyanlou', function(err) {
	if(err) {
		throw err;
	}
	console.log("æˆåŠŸåˆªé™¤äº† /tmp/shiyanlou");
});

åŒæ­¥ï¼š
var fs = require("fs");

fs.unlinkSync("/tmp/shiyanlou");
console.log("æˆåŠŸåˆªé™¤äº† /tmp/shiyanlou");

var fs = require("fs");

readFileè®€å–æ–‡ä»¶
fs.readFile(filename, [option], callback)
åƒæ•¸èªªæ˜:
filename String æ–‡ä»¶å
option Object
encoding String |null default=null
flag String default='r'
callback Function

readFileçš„å›èª¿å‡½æ•¸æ¥æ”¶å…©å€‹åƒæ•¸ï¼Œerræ˜¯è®€å–æ–‡ä»¶å‡ºéŒ¯æ™‚è§¸ç™¼çš„éŒ¯èª¤å°è±¡ï¼Œdataæ˜¯å¾æ–‡ä»¶è®€å–çš„æ•¸æ“šã€‚
fs.readFile('./test.txt', function(err, data) {
	if (err) {
		throw err;
	}
	console.log(data);
});

é€™æ˜¯åŸå§‹äºŒé€²åˆ¶æ•¸æ“šåœ¨ç·©è¡å€ä¸­çš„å…§å®¹
è¦é¡¯ç¤ºæ–‡ä»¶å…§å®¹å¯ä»¥ä½¿ç”¨toString()æˆ–è€…è¨­ç½®è¼¸å‡ºç·¨ç¢¼
toString()å¯«æ³•:
fs.readFile("./test.txt", function(err, data) {
	if (err) {
		throw err;
	}
	console.log(data.toString());
});

è¨­ç½®UTF-8ç·¨ç¢¼å¯«æ³•:
fs.readFile("./test.txt", "utf-8", function(err, data) {
	if (err) {
		throw err;
	}
	console.log("utf-8:", data.toString());
	// ç›´æ¥ç”¨console.log(data);ä¹Ÿå¯
});

readFileåŒæ­¥çš„å¯«æ³•å°±æ˜¯æ²’æœ‰å›èª¿å‡½æ•¸(callback)ï¼š fs.readFileSync(filename, [options])
___________________________________________________________________________________________________________________________________________________________________________________________________________________
Socket.IO æ˜¯ä¸€å€‹é¢å‘å³æ™‚ web æ‡‰ç”¨çš„ JavaScript åº«
å®ƒä½¿å¾—ä¼ºæœå™¨å’Œå®¢æˆ¶ç«¯ä¹‹é–“å³æ™‚é›™å‘çš„é€šä¿¡æˆç‚ºå¯èƒ½ã€‚ä»–æœ‰å…©å€‹éƒ¨åˆ†ï¼šåœ¨ç€è¦½å™¨ä¸­åŸ·è¡Œçš„å®¢æˆ¶ç«¯åº«ï¼Œå’Œä¸€å€‹é¢å‘Node.jsçš„ä¼ºæœå™¨ç«¯åº«ã€‚å…©è€…æœ‰è‘—å¹¾ä¹ä¸€æ¨£çš„APIã€‚åƒNode.jsä¸€æ¨£ï¼Œå®ƒä¹Ÿæ˜¯äº‹ä»¶é©…å‹•çš„
socket.io é€šè¨Šå”å®šåŸºç¤ websocket
server on		client emit

Socket.ioæ˜¯ä¸€ä¸ªWebSocketåº“ï¼ŒåŒ…æ‹¬äº†å®¢æˆ·ç«¯çš„jså’ŒæœåŠ¡å™¨ç«¯çš„nodejsï¼Œå®ƒçš„ç›®æ ‡æ˜¯æ„å»ºå¯ä»¥åœ¨ä¸åŒæµè§ˆå™¨å’Œç§»åŠ¨è®¾å¤‡ä¸Šä½¿ç”¨çš„å®æ—¶åº”ç”¨ã€‚ å®ƒä¼šè‡ªåŠ¨æ ¹æ®æµè§ˆå™¨ä»WebSocketã€ AJAX é•¿è½®è¯¢ã€Iframeæµç­‰ç­‰å„ç§æ–¹å¼ä¸­é€‰æ‹©æœ€ä½³çš„æ–¹å¼æ¥å®ç°ç½‘ç»œå®æ—¶åº”ç”¨

ï¼ˆç¨‹å¼å¯¦ä½œ â€“ å³æ™‚èŠå¤©å®¤ï¼‰
åœ¨é€™å€‹ç¯„ä¾‹ä¸­æˆ‘å€‘å°‡æœƒå»ºç«‹ä¸€å€‹å³æ™‚èŠå¤©å®¤ï¼Œé€é socket.io ä¾†å¯¦ç¾ Server èˆ‡å¤šå€‹ Client ä¹‹é–“çš„æºé€šï¼Œä¸¦åœ¨ç”¨æˆ¶ç™»å…¥çš„æ™‚å€™è®€å–æ‰€æœ‰å°è©±è¨˜éŒ„ã€é€å‡ºè¨Šæ¯çš„æ™‚å€™ç™¼é€åˆ°æ‰€æœ‰çš„ç”¨æˆ¶ä»‹é¢ã€‚

ï¼ˆåˆå§‹åŒ– server ç«¯å°ˆæ¡ˆï¼‰
åœ¨ terminal å…ˆæ–°å»ºä¸¦é€²å…¥è³‡æ–™å¤¾ mkdir socket-server && cd socket-server
æ¥è‘—å®‰è£ socket.io èˆ‡ expressï¼ˆç¶²é ä¼ºæœå™¨æ¡†æ¶ï¼‰ npm i socket.io express -s

ï¼ˆè¨­å®š socket èˆ‡ http(s) é€£ç·šï¼‰
å»ºç«‹ index.js ï¼Œindex.js æ˜¯å¾Œç«¯çš„ä¸»ç¨‹å¼ï¼Œè² è²¬è™•ç†ç”¨æˆ¶ç«¯å‚³ä¾†çš„äº‹ä»¶ä¸¦å°‡çµæœå»£æ’­çµ¦æ‰€æœ‰ç”¨æˆ¶ã€‚æˆ‘å€‘é¦–å…ˆè¨­å®š socket èˆ‡ api çš„ç›£è½ç«¯å£ã€‚


*å› ç‚ºæ­¤ç¯„ä¾‹éƒ½åœ¨æœ¬æ©Ÿé›»è…¦é–‹ç™¼ï¼Œä¸¦ä¸”ç›´æ¥é€£ç·šåˆ° localhostï¼Œæ•…æ²’æœ‰è¨­å®š ssl åŠ å¯†èˆ‡ httpsã€‚

var fs = require('fs')
// var https = require('https')
// å¦‚æœä¸ç”¨ https çš„è©±ï¼Œè¦æ”¹æˆå¼•ç”¨ http å‡½å¼åº«
var http = require('http')
var socketio = require('socket.io')

//https çš„ä¸€äº›è¨­å®šï¼Œå¦‚æœä¸éœ€è¦ä½¿ç”¨ ssl åŠ å¯†é€£ç·šçš„è©±ï¼ŒæŠŠå…§å®¹è¨»è§£æ‰å°±å¥½
var options = {
    // key: fs.readFileSync('é€™å€‹ç¶²åŸŸçš„ ssl key ä½ç½®'),
    // cert: fs.readFileSync('é€™å€‹ç¶²åŸŸçš„ ssl fullchain ä½ç½®')
}

//http & socket port
var server = http.createServer(options);
server.listen(4040)
var io = socketio(server);
console.log("Server socket 4040 , api 4000")

//api port
var app = require('express')();			// like java's formate: new express()
var port = 4000;
app.listen(port, function () {
    console.log('API listening on *:' + port);
});

//ç”¨ api æ–¹å¼å»ºç«‹é€£ç·š
app.get('/api/messages', function (req, res) {
    let messages = 'hellow world'
    res.send(messages);
})

//ç”¨ socket æ–¹å¼å»ºç«‹é€£ç·š
io.on('connection', function (socket) {
    console.log('user connected')
})

åŸ·è¡Œ npm index.js ï¼Œå¦‚æœå‡ºç¾ä»¥ä¸‹è¨Šæ¯çš„è©±ï¼Œä»£è¡¨æˆ‘å€‘çš„ http server åˆæ­¥å»ºç«‹å®Œæˆ
Server socket 4040 , api 4000
API listening on *:4000

ç‚ºäº†æ¸¬è©¦ api é€£ç·šæ˜¯ä¸æ˜¯ä¹Ÿæ˜¯æ­£å¸¸ï¼Œæˆ‘å€‘ç›´æ¥ä½¿ç”¨ç€è¦½å™¨é€£ç·šåˆ° server ç›£è½çš„ api ç¶²å€ï¼ŒæˆåŠŸçœ‹åˆ°é€é api GET å–å¾—çš„å›è¦†é¡¯ç¤ºåœ¨è¢å¹•ä¸Šï¼Œå†æ‰“é–‹ devtools çš„ Network ä¹Ÿç¢ºèªç„¡èª¤ï¼Œæ¥ä¸‹ä¾†å¯ä»¥é€²å…¥ socket çš„éƒ¨åˆ†ï¼

æˆ‘å€‘ä¸€æ¨£å…ˆæ¸¬è©¦ socket çš„é€£ç·šèƒ½ä¸èƒ½æˆåŠŸï¼Œä½†æ˜¯è¦æ€éº¼è®“ç€è¦½å™¨ç«¯å¯ä»¥é€£ç·šåˆ° socket å‘¢ï¼Ÿ
åªè¦åœ¨ html çš„ head å¼•ç”¨ socket.io çš„è£ç½®ç«¯å¥—ä»¶å°±å¯ä»¥äº† <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"></script>ã€‚æˆ‘å€‘ç›´æ¥åœ¨ <script> è£¡é¢å»ºç«‹èˆ‡ä¼ºæœå™¨çš„é€£ç·šï¼švar socket = io("<http://localhost:4040>")ï¼Œå°‡ç€è¦½å™¨æ‰“é–‹ä¹‹å¾Œå¦‚æœçœ‹åˆ° server æœ‰æ‰“å° user connected çš„è©±å°±æ˜¯é€£ç·šæˆåŠŸå›‰ã€‚(åˆ° network å„€è¡¨ç‰ˆä¹Ÿå¯ä»¥çœ‹åˆ°æˆ‘å€‘çš„è«‹æ±‚æˆåŠŸ)

ï¼ˆåŸºæœ¬çš„è¨Šæ¯å‚³é€ï¼‰
ä¸è«–åœ¨ server æˆ–æ˜¯ clientï¼Œsocket éƒ½æ˜¯é€é on ä¾†ç›£è½äº‹ä»¶ã€ç”¨ emit ä¾†ç™¼é€äº‹ä»¶ï¼Œå¤§è‡´çš„é—œä¿‚æœƒæ˜¯é€™æ¨£ï¼š

Server ç«¯						å»ºç«‹é€£ç·š/äº‹ä»¶å‚³é€æ–¹å‘		Client ç«¯

io.on(â€˜connectionâ€™, function (socket) {â€¦})			å»ºç«‹é€£ç·š			socket = io(â€œsocket ip:portâ€)

io.emit(â€œè¦å°æ‰€æœ‰ Client å»£æ’­çš„äº‹ä»¶åç¨±â€, data)
							â€”â€”â€”>			socket.on(â€œä¾†è‡ªclient çš„äº‹ä»¶åç¨±â€, callback)
socket.emit(â€œè¦å°ç•¶å‰é€£ç·šçš„ Client ç™¼é€çš„äº‹ä»¶åç¨±â€, data)				

socket.on(â€œä¾†è‡ªclient çš„äº‹ä»¶åç¨±â€, callback)			<â€”â€”â€”			socket.emit(â€œè¦å° server ç™¼é€çš„äº‹ä»¶åç¨±â€,data)


å…ˆç”± client emit ä¸€å€‹æœ€ç°¡å–®çš„è¨Šæ¯çœ‹çœ‹ï¼Œé€å‡ºä¸€å€‹åŒ…å« name èˆ‡ message çš„ç‰©ä»¶ï¼š
// index.html
// å»ºç«‹èˆ‡ server çš„é€£ç·š
var socket = io("<http://localhost:4040>")

// ç™¼é€ä¸€å€‹ "sendMessage" äº‹ä»¶
socket.emit("sendMessage", {
            name: "majer",
            message: "hello everyone"
        })
// ç›£è½ä¾†è‡ª server çš„ "allMessage" äº‹ä»¶
socket.on("allMessage", function(message){
    console.log(message)
})

ç•¶ç„¶ä¹Ÿåˆ¥å¿˜äº†åœ¨ server åŠ ä¸Šâ€sendMessageâ€ äº‹ä»¶çš„ç›£è½å™¨ï¼š
// index.js
io.on('connection', function (socket) {
    console.log('user connected')
    // å»ºç«‹ä¸€å€‹ "sendMessage" çš„ç›£è½
    socket.on("sendMessage", function (message) {
        console.log(message)
  // ç•¶æ”¶åˆ°äº‹ä»¶çš„æ™‚å€™ï¼Œä¹Ÿç™¼é€ä¸€å€‹ "allMessage" äº‹ä»¶çµ¦æ‰€æœ‰çš„é€£ç·šç”¨æˆ¶
  io.emit("allMessage", message)
    })
})
çœ‹ä¸€ä¸‹ server é¡¯ç¤ºçš„çµæœï¼Œæœç„¶æŠŠæˆ‘å€‘å‰›å‰› emit çš„è³‡æ–™å°å‡ºä¾†äº†
Server socket 4040 , api 4000
API listening on *:4000
user connected
{ name: 'majer', message: 'hello everyone' }

è€Œç€è¦½å™¨ä¹Ÿå¯ä»¥çœ‹åˆ°å¾ server ç™¼é€éä¾†çš„ â€œallMessageâ€ äº‹ä»¶ï¼š
15:42:12.319 received allMessage event
15:42:12.319 {name: "majer", message: "hello everyone"}

è¬ä¸ˆé«˜æ¨“å¹³åœ°èµ·ï¼Œæˆ‘å€‘ç·Šæ¥è‘—å°±å¯ä»¥åœ¨é€™å€‹åŸºç¤ä¹‹ä¸Šå»ºç«‹èŠå¤©å®¤çš„ä»‹é¢å›‰ã€‚
ï¼ˆèŠå¤©å®¤çš„åŠŸèƒ½ï¼‰
æˆ‘å€‘åˆ—å‡ºèŠå¤©å®¤æœƒæœ‰çš„åŸºæœ¬åŠŸèƒ½ï¼š
			é€²å…¥èŠå¤©å®¤æ™‚å°å‡ºèŠå¤©å®¤ç›®å‰çš„å°è©±è¨˜éŒ„
			å¯ä»¥è¼¸å…¥ç”¨æˆ¶åç¨±èˆ‡è¨Šæ¯ï¼Œä¸¦ä¸”é»æ“Šå¾Œç™¼é€
			å¯ä»¥æ¥æ”¶åˆ¥äººç™¼é€çš„æ–°è¨Šæ¯
Server ç«¯ ğŸ–¥

æˆ‘å€‘å…ˆåœ¨ server ç«¯æŠŠæ‰€æœ‰çš„å°è©±å…§å®¹èˆ‡ç”¨æˆ¶å„²å­˜åœ¨ messages é™£åˆ—å…§ï¼Œæ¯ç•¶æœ‰æ–°çš„ç”¨æˆ¶å»ºç«‹é€£ç·šï¼Œå°±æŠŠä¹‹å‰çš„å°è©±é€é allMessage å‚³é€çµ¦ç”¨æˆ¶ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘å€‘ä¹Ÿç›£è½ç”¨æˆ¶ç™¼é€çš„ "sendMessage" äº‹ä»¶ï¼Œé™¤äº†ç™¼é€æ–°è¨Šæ¯çµ¦æ‰€æœ‰ç”¨æˆ¶ä¹‹å¤–ï¼Œä¹ŸæŠŠæ–°æ”¶åˆ°çš„è¨Šæ¯å¡åˆ° messages è£¡é¢ï¼Œè®“æ–°ç”¨æˆ¶é€²ä¾†çš„æ™‚å€™å¯ä»¥çœ‹åˆ°ã€‚

// index.js
var messages = [
    { name: "Majer", message: "Welcome!"  }
]

io.on('connection', function (socket) {
    console.log('user connected')
    // ç™¼é€ä¹‹å‰çš„å…¨éƒ¨è¨Šæ¯
    io.emit("allMessage", messages)
    // ç•¶æ­¤ç”¨æˆ¶ç™¼é€è¨Šæ¯çš„æ™‚å€™ï¼Œå…ˆæŠŠæ–°è¨Šæ¯æ”¾åˆ° messages é™£åˆ—è£¡é¢
    // å† emit çµ¦æ‰€æœ‰ç”¨æˆ¶
    socket.on("sendMessage", function (message) {
        console.log(message)
        messages.push(message)
        io.emit("newMessage", message)
    })
})

User ç«¯ ğŸ‘¨ğŸ¼â€ğŸ’»

åœ¨é€²å…¥é é¢çš„æ™‚å€™ï¼Œæˆ‘å€‘ä½¿ç”¨ on("allMessage") æŠŠä¹‹å‰çš„å°è©±è¨˜éŒ„éƒ½å„²å­˜åˆ° messages è£¡é¢ï¼Œå†é€é v-for è™•ç† messages é™£åˆ—ï¼ŒæŠŠå°è©±çš„å…§å®¹èˆ‡ç”¨æˆ¶åç¨±å°åœ¨ç•«é¢ä¸Šã€‚æ­¤å¤–ï¼ŒåŠ ä¸Šæ–°è¨Šæ¯çš„ç›£è½ on("newMessage")ï¼Œå¦‚æœæœ‰æ–°çš„è¨Šæ¯ï¼Œä¹Ÿæ›´æ–°åˆ° messages çš„æœ€å¾Œé¢ã€‚

ç™¼é€è¨Šæ¯çš„éƒ¨åˆ†ï¼Œæˆ‘å€‘ä½¿ç”¨ Vue æŠŠç”¨æˆ¶çš„åç¨±èˆ‡è¨Šæ¯ç¶å®šåœ¨ temp ä¸Šï¼Œæ¯æ¬¡ç™¼é€çš„æ™‚å€™å°±ç›´æ¥é€å‡º temp ç‰©ä»¶ï¼Œå†æŠŠ temp.message è¨­å®šæˆç©ºå­—ä¸² '' æ¸…ç©ºã€‚

<body>
    <div id="app">
        <ul>
            <li v-for="m in messages">
                <h4>{{m.message}}<span>-- {{m.name}}</span></h4>
            </li>
        </ul>
        <!-- å°‡ name èˆ‡ message ç¶å®šåˆ° data çš„ temp ç‰©ä»¶å…§ -->
        <input v-model="temp.message" placeholder="è¨Šæ¯" @keydown.enter="sendMessage" />
        <input v-model="temp.name" placeholder="ä½ æ˜¯èª°ï¼Ÿ" />
        <button @click="sendMessage">é€å‡º</button>
    </div>
</body>

<script>
    var vm = new Vue({
        el: "#app",
        data: {
            messages: [],
            temp: {},
            socket: null,
        },
        mounted() {
            this.socket = socket = io("<http://localhost:4040>")

            // é€²å…¥èŠå¤©å®¤æ™‚ï¼Œæœƒæ”¶åˆ°ä¹‹å‰çš„å…¨éƒ¨è¨Šæ¯ï¼Œä¸¦æ›´æ–°åˆ° messages
            this.socket.on("allMessage", obj => {
                console.log('received all messages')
                this.messages = obj
            })

            // è¨­å®šæ¥æ”¶åˆ°æ–°è¨Šæ¯çš„ç›£è½å™¨
            this.socket.on("newMessage", obj => {
                console.log('received new message')
                this.messages.push(obj)
            })
        },
        methods: {
            sendMessage() {
                console.log('sending new message')
                this.socket.emit("sendMessage", this.temp)
                this.temp.message = ""
            }
        }
    })
</script>

å¦‚æ­¤ä¸€ä¾†ï¼Œæˆ‘å€‘å°±å®Œæˆäº†æœ€åŸºç¤çš„èŠå¤©å®¤ä»‹é¢èˆ‡åŠŸèƒ½äº†ï¼


å…¶ä»–å»¶ä¼¸
æˆ‘å€‘ä¹Ÿå¯ä»¥åŠ å…¥å…¶ä»–çš„åŠŸèƒ½ï¼š
			é¡¯ç¤ºå…¶ä»–äººåœ¨è¼¸å…¥ä¸­
			é¡¯ç¤ºç”¨æˆ¶ä¸Šç·šï¼ä¸‹ç·š
			è¨­å®šç”¨æˆ¶ä¸é‡è¤‡çš„åå­—
			å¯„é€ç§äººè¨Šæ¯
			å‚³é€åœ–ç‰‡ã€gif

æœ€å¾Œé™„ä¸Šæœ‰åŠ ä¸Šè¼¸å…¥ä¸­ç‰ˆæœ¬çš„å®Œæ•´ç¨‹å¼ç¢¼ï¼š
serverï¼š
var fs = require("fs")
// var https = require("https")
// å¦‚æœä¸éœ€è¦ç”¨httpsçš„è©±ï¼Œè¦æ”¹æˆå¼•ç”¨httpå–”
var http = require("http")
var socketio = require("socket.io")

// httpsçš„ä¸€äº›è¨­å®šï¼Œå¦‚æœä¸éœ€è¦ä½¿ç”¨sslåŠ å¯†é€£ç·šçš„è©±ï¼ŒæŠŠå…§å®¹è¨»è§£æ‰å°±å¥½
var options = {
	// key: fs.readFileSync("é€™å€‹ç¶²åŸŸçš„ssl keyä½ç½®"),
	// cert: fs.readFileSync("é€™å€‹ç¶²åŸŸçš„ssl fullchainä½ç½®")
}

// http & socket port
var server = http.createServer(options);
server.listen(4040)
var io = socketio(server);
console.log("Server socket 4040, api 4000")

// api port
var app = require("express")();
var port = 4040;
app.listen(port, function() {
	console.log("API listening on *:" + port);
});

// ç”¨ api æ–¹å¼å–å¾—
app.get("/api/messages", function(req, res) {
	let messages = "hello world"
	res.send(messages);
})

var messages = [
	{ name: "Majer", message: "Welcome!" }
]

var typing = false
var timer = null
// ç”¨socket æ–¹å¼å–å¾—
io.on("connection", function(socket) {
	console.log("user connected")
	socket.emit("allMessage", message)

	socket.on("sendMessage", function(message) {
		console.log(message)
		messages.push(message)
		io.emit("newMessage", message)
	})

	socket.on("sendTyping", function() {
		console.log("typing")
		typing = true
		io.emit("someoneIsTyping", typing)
		clearTimeout(timer)
		timer = setTimeout(() => {
			typing = false
			io.emit("someoneIsTyping", typing)
		}, 3000)
	})
})

clientï¼š
<!-- index.html -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.11/vue.min.js"></script>
</head>

<body>
    <div id="app">
        <ul>
            <li v-for="m in messages">
                <h4>{{m.message}}<span>-- {{m.name}}</span></h4>
            </li>
        </ul>

        <div>{{ typing?'è¼¸å…¥ä¸­...':'' }}</div>
        <br>
        <!-- å°‡ name èˆ‡ message ç¶å®šåˆ° data çš„ temp ç‰©ä»¶å…§ -->
        <input v-model="temp.message" placeholder="è¨Šæ¯" @keydown.enter="sendMessage" @keypress="sendTyping" />
        <input v-model="temp.name" placeholder="ä½ æ˜¯èª°ï¼Ÿ" />
        <button @click="sendMessage">é€å‡º</button>
    </div>
</body>

<script>
    var vm = new Vue({
        el: "#app",
        data: {
            messages: [],
            temp: {},
            socket: null,
            typing: false
        },
        mounted() {
            this.socket = socket = io("http://localhost:4040")

            // é€²å…¥èŠå¤©å®¤æ™‚ï¼Œæœƒæ”¶åˆ°ä¹‹å‰çš„å…¨éƒ¨è¨Šæ¯ï¼Œä¸¦æ›´æ–°åˆ° messages
            this.socket.on("allMessage", obj => {
                console.log('received all messages')
                console.log(obj)
                this.messages = obj
            })

            // è¨­å®šæ¥æ”¶åˆ°æ–°è¨Šæ¯çš„ç›£è½å™¨
            this.socket.on("newMessage", obj => {
                console.log('received new message')
                this.messages.push(obj)
            })

            this.socket.on("someoneIsTyping", value => {
                this.typing = value
            })
        },
        methods: {
            sendMessage() {
                console.log('sending new message')
                this.socket.emit("sendMessage", this.temp)
                this.temp.message = ""
            },
            sendTyping() {
                this.socket.emit("sendTyping")
            }
        }
    })
</script>

</html>
